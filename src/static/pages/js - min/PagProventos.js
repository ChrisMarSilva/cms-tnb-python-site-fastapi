async function iniciarAnimacaoPesquisar(){promise=new Promise((a,t)=>{$("#iRefresh").addClass("fa-spin"),$("#btnRendPesquisar").addClass("disabled"),a(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})}async function finalizarAnimacaoPesquisa(){promise=new Promise((a,t)=>{$("#iRefresh").removeClass("fa-spin"),$("#btnRendPesquisar").removeClass("disabled"),a(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})}async function fLimparGrid(a){promise=new Promise((t,r)=>{$("#txtIdRendDel").val(""),$("#selRendAtivo").val(""),$("#selRendTipo").val(""),$("#txtRendDataIni").val(fDataPrimeira()),$("#txtRendDataFim").val(""),fLimparSomenteGrid(a),t(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})}async function fLimparSomenteGrid(a){try{promise=new Promise((a,t)=>{finalizarAnimacaoPesquisa(),$("th").addClass("text-center"),$("#Grid").dataTable().fnClearTable(),$("#Grid").dataTable({bDestroy:!0}).fnDestroy(),$("#Grid").DataTable({data:[],oLanguage:fTraduzirGrid(),aoColumns:[{bSortable:!0,sWidth:"50px",targets:0},{bSortable:!0,sWidth:"50px",targets:1},{bSortable:!0,sWidth:"50px",targets:2},{bSortable:!0,sWidth:"50px",targets:3},{bSortable:!0,sWidth:"50px",targets:4},{bSortable:!0,sWidth:"50px",targets:5},{bSortable:!0,sWidth:"50px",targets:6},{bSortable:!0,sWidth:"50px",targets:7},{visible:!1,targets:8},{visible:!1,targets:9},{bSortable:!0,sWidth:"50px",targets:10}],order:[[1,"desc"],[2,"desc"]],iDisplayLength:100,bLengthChange:!1,bFilter:!1,searchable:!0,orderable:!0,bAutoWidth:!1}),a(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})}catch(a){fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}async function fMontarGrid(a,t){try{promise=new Promise((r,e)=>{$("#Grid").DataTable({processing:!0,serverSide:!1,oLanguage:fTraduzirGrid(),data:t,aoColumns:[{bSortable:!0,sWidth:"20px",targets:0,render:function(a,t,r){return"display"==t?colcarFormacataoData(r[0]):a}},{bSortable:!0,sWidth:"20px",targets:1,render:function(a,t,r){return"display"==t?colcarFormacataoData(r[1]):a}},{bSortable:!0,sWidth:"10px",targets:2},{bSortable:!0,sWidth:"40px",targets:3,render:function(a,t,r){return"display"==t?(Tipo=r[3],"DIVIDENDOS"==Tipo?'<span style="font-size:12px;" class="badge badge-success">'+Tipo+"</span>":"JRS CAP PRÓPRIO"==Tipo?'<span style="font-size:12px;" class="badge badge-primary">'+Tipo+"</span>":"REST CAP DIN"==Tipo?'<span style="font-size:12px;" class="badge badge-danger">'+Tipo+"</span>":"RENDIMENTO"==Tipo?'<span style="font-size:12px;" class="badge badge-warning">'+Tipo+"</span>":'<span style="font-size:12px;" class="badge badge-default">'+Tipo+"</span>"):a}},{bSortable:!0,sWidth:"80px",targets:4},{bSortable:!0,sWidth:"15px",targets:5,render:function(a,t,r){return"display"==t?colcarFormacataoInteiro(r[5]):a}},{bSortable:!0,sWidth:"30px",targets:6,render:function(a,t,r){return"display"==t?"R$ "+r[6]:a}},{bSortable:!0,sWidth:"30px",targets:7,render:function(a,t,r){return"display"==t?"R$ "+r[7]:a}},{visible:!1,targets:8},{visible:!1,targets:9},{bSortable:!0,sWidth:"30px",targets:10,render:function(t,r,e){var o="",i="",n="",s="";return"display"==r&&(IdRend=e[8],CodAtivo=e[2],SitRend=e[9],"B"!=SitRend&&(s=" disabled"),o+='<div class="btn-group btn-group-sm" role="group" aria-label="Basic example">',o+='<a class="btn btn-sm btn-success btn-icon btn-icon-mini btn-round btn-simple'+s+'"'+s+' style="font-size:0.5rem; " title="Aprovar Ativo '+CodAtivo+'" href="javascript:void(0);" onclick="fAprovarProventos( \''+a+"', '"+IdRend+"', '"+CodAtivo+"' );\">",o+='   <i class="fa fa-check fa-lg" aria-hidden="true"></i> ',o+="</a>",i+='<a class="btn btn-sm btn-warning btn-icon btn-icon-mini btn-round btn-simple" style="font-size:0.5rem;" title="Alterar Ativo '+CodAtivo+'" href="javascript:void(0);" onclick="fAbrirModalDetalheRend( \''+a+"', '"+IdRend+"', '"+CodAtivo+"', 'Alterar' );\">",i+='   <i class="fa fa-pencil fa-lg" aria-hidden="true"></i> ',i+="</a>",n+='<a class="btn btn-sm btn-danger btn-icon btn-icon-mini btn-round btn-simple" style="font-size:0.5rem;" title="Excluir Ativo '+CodAtivo+'" href="javascript:void(0);" role="button" aria-pressed="true" onclick="fChamarPagExclusaoRend( \''+IdRend+"', '"+CodAtivo+"' );\">",n+='   <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i> ',n+="</a>",n+="</div>"),o+"&nbsp;"+i+"&nbsp;"+n}}],createdRow:function(a,t,r){$("td",a).addClass("text-center")},initComplete:function(a,t){finalizarAnimacaoPesquisa()},order:[[1,"desc"],[2,"desc"]],dom:"frtBpi",buttons:[{extend:"excelHtml5",text:'<i class="fa fa-file-excel-o"></i> Excel',className:"btn btn-outline-default btn-sm",title:NOME_PROJETO+" - Proventos",titleAttr:"Excel",exportOptions:{columns:[0,1,2,3,4,5,6,7]},customizeData:function(a){for(var t=0;t<a.body.length;t++)for(var r=0;r<a.body[t].length;r++)5==r&&(a.body[t][r]="‌"+a.body[t][r])}},{extend:"csvHtml5",charset:"UTF-8",fieldSeparator:";",titleAttr:"CSV",text:'<i class="fa fa-file-o"></i> CSV',className:"btn btn-outline-default btn-sm",title:NOME_PROJETO+" - Proventos",bom:!0,exportOptions:{columns:[0,1,2,3,4,5,6,7]}},{extend:"pdfHtml5",text:'<i class="fa fa-file-pdf-o"></i> PDF',className:"btn btn-default btn-sm",titleAttr:"PDF",title:NOME_PROJETO+" - Proventos",pageSize:"A3",alignment:"center",exportOptions:{columns:[0,1,2,3,4,5,6,7]},footer:!0,customize:function(a){a.defaultStyle.fontSize=12,a.styles.tableHeader.fontSize=14}},{extend:"print",text:'<i class="fa fa-print"></i> Imprimir',title:NOME_PROJETO+" - Proventos",titleAttr:"Imprimir",className:"btn btn-default btn-sm",exportOptions:{columns:[0,1,2,3,4,5,6,7]}}],pageLength:100,bLengthChange:!1,bFilter:!1,searchable:!0,orderable:!0,bAutoWidth:!1,bInfo:!0,bSearchable:!1,bOrderable:!0,bSortable:!0,bPaginate:!0,bOrdering:!0}),$(document).ajaxError(function(t,r,e,o){fLimparSomenteGrid(a),finalizarAnimacaoPesquisa()}),r(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})}catch(t){fLimparSomenteGrid(a),finalizarAnimacaoPesquisa(),null!=t.description&&fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}async function fCarregarGrid(a){try{promise=new Promise((t,r)=>{fLimparAreaAlertaPrinc(),$("#Grid").dataTable().fnClearTable(),$("#Grid").dataTable({bDestroy:!0}).fnDestroy(),finalizarAnimacaoPesquisa(),iniciarAnimacaoPesquisar();var e=$("#selRendAtivo").val().trim(),o=$("#selRendTipo").val().trim(),i=$("#txtRendDataIni").val().trim(),n=$("#txtRendDataFim").val().trim();i=tirarFormacataoData(i),n=tirarFormacataoData(n),$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:a+"proventos/grid",data:{CodAtivo:e,TipoRend:o,Corretora:"",DataIni:i,DataFim:n},success:function(t){var r=t.data.Resultado,e=t.data.Mensagem,o=t.data.Lista;return"NSESSAO"==r?($(location).attr("href",a+"/login"),!1):"NOK"==r?(finalizarAnimacaoPesquisa(),fLimparSomenteGrid(a),void fCriarAlertaPrinc(TP_ALERTA_AVISO,e)):"FALHA"==r?(finalizarAnimacaoPesquisa(),fLimparSomenteGrid(a),void fCriarAlertaPrinc(TP_ALERTA_ERRO,e)):"OK"!=r?(finalizarAnimacaoPesquisa(),fLimparSomenteGrid(a),void fCriarAlertaPrinc(TP_ALERTA_ERRO,e)):void fMontarGrid(a,o)},error:function(t){return finalizarAnimacaoPesquisa(),fLimparSomenteGrid(a),fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO),!1}}),t(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})}catch(t){finalizarAnimacaoPesquisa(),fLimparSomenteGrid(a),null!=t.description&&fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fAbrirModalDetalheRendImportarProv(a){try{fLimparAreaAlerta("AreaAlertaModalImportProv"),$("#AreaTableModalImportProv").html(""),$("#PopModalImportCSVProv").modal({backdrop:"static"})}catch(a){fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}async function iniciarAnimacaoImportar(){promise=new Promise((a,t)=>{$("#iImportar").addClass("fa-spinner"),$("#iImportar").addClass("fa-pulse"),a(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})}async function finalizarAnimacaImportar(){promise=new Promise((a,t)=>{$("#iImportar").removeClass("fa-spinner"),$("#iImportar").removeClass("fa-pulse"),$("#iImportar").addClass("fa fa-upload"),a(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})}function fImportarCSVProv(a){try{finalizarAnimacaImportar(),fLimparAreaAlerta("AreaAlertaModalImportProv");var t=$("#AreaTableModalImportProv");t.html("");var r=$("#arquivo");if(""==r.val().trim())return fCriarAlerta("AreaAlertaModalImportProv",TP_ALERTA_AVISO,"Nenhum arquivo selecionado para importação."),!1;if(!new RegExp("([a-zA-Z0-9s_\\.-:])+(.csv)$").test(r.val().toLowerCase()))return fCriarAlerta("AreaAlertaModalImportProv",TP_ALERTA_AVISO,"Tipo de Arquivo inválido para importação."),!1;iniciarAnimacaoImportar();var e=new FormData;e.append("arquivo",r[0].files[0]),$.ajax({dataType:"json",type:"POST",url:a+"proventos/importarcsv",data:e,processData:!1,contentType:!1,cache:!1,timeout:6e5,success:function(e){finalizarAnimacaImportar();var o=e.data.Resultado,i=e.data.Mensagem,n=e.data.Lista;if("NSESSAO"==o)return $(location).attr("href",a+"/login"),!1;if("NOK"==o)return fCriarAlerta("AreaAlertaModalImportProv",TP_ALERTA_AVISO,i),!1;if("FALHA"!=o){if("OK"==o){if(r.val(""),fCriarAlerta("AreaAlertaModalImportProv",TP_ALERTA_SUCESSO,i),n.length>0){var s="";s+="<hr />",s+='<div class="form-group">',s+='  <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 text-right">',s+='    <a class="btn btn-sm btn-danger btn-round btn-simple text-center" style="font-size:14px;" title="Excluir Todos os Ativo Importados" href="javascript:void(0);" role="button" aria-pressed="true" onclick="fExcluirTodosDadosRendimento( \''+a+"', );\"> ",s+='       <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i> Excluir Todos ',s+="    </a>",s+="  </div>",s+="</div>",s+='<div class="table-responsive">',s+='<table id="GridImport" border="0" style="font-size: 11px" class="table table-sm table-hover table-condensed" cellspacing="0" width="100%">',s+="  <thead>",s+='    <tr style="font-size: 11px" class="bg-secondary text-white text-center">',s+='      <th style="width:2px;">Linha</th>',s+='      <th style="width:12px;">Data Ex</th>',s+='      <th style="width:12px;">Data Pagto</th>',s+='      <th style="width:15px;">Tipo</th>',s+='      <th style="width:5px;">Ativo</th>',s+='      <th style="width:5px;">Quant.</th>',s+='      <th style="width:15px;">Preço Bruto</th>',s+='      <th style="width:15px;">Preço Líquido</th>',s+='      <th style="width:12px;">Situação</th>',s+='      <th style="width:10px;display: none; ">IdProv</th>',s+='      <th style="width:2px;">Ação</th>',s+="    </tr>",s+="  </thead>",s+="  <tbody>",$.each(n,function(t,r){CodAtivo=r[3],IdProv=r[8];var e="",o="Importado"==r[7]?"":" disabled";e+='<a class="btn btn-sm btn-danger btn-icon btn-icon-mini btn-round btn-simple'+o+'"'+o+' style="font-size:0.5rem;" title="Excluir Provento '+CodAtivo+'" href="javascript:void(0);" role="button" aria-pressed="true" ',e+="   onclick=\"fExcluirDadosRendimento( '"+a+"', '"+IdProv+"', '"+CodAtivo+'\' );"> <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i> ',e+="</a>",s+='    <tr style="font-size: 10px" id="TrImport'+IdProv+'" class="text-center '+("Importado"==r[7]?"text-success":"text-danger")+'"> ',s+="      <td>"+colcarFormacataoInteiro(r[9].trim())+"</td>",s+="      <td>"+colcarFormacataoData(r[0])+"</td>",s+="      <td>"+colcarFormacataoData(r[1])+"</td>",s+="      <td>"+r[2]+"</td>",s+="      <td>"+r[3]+"</td>",s+="      <td>"+colcarFormacataoInteiro(r[4])+"</td>",s+="      <td>R$ "+r[5]+"</td>",s+="      <td>R$ "+r[6]+"</td>",s+="      <td>"+r[7]+"</td>",s+='      <td style="display: none;">'+r[8]+"</td>",s+="      <td>"+e+"</td>",s+="    </tr>"}),s+="  </tbody>",s+="</table>",s+="</div>",s+='<div class="form-group">',s+='  <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 text-right">',s+='    <a class="btn btn-sm btn-danger btn-round btn-simple text-center" style="font-size:14px;" title="Excluir Todos os Ativo Importados" href="javascript:void(0);" role="button" aria-pressed="true" onclick="fExcluirTodosDadosRendimento( \''+a+"', );\"> ",s+='       <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i> Excluir Todos ',s+="    </a>",s+="  </div>",s+="</div>",t.append(s),buscar_todos_codigos_proventos(a,"selRendAtivo",!1,!0,!1,!0),buscar_todos_codigos_comprados_para_proventos(a,"selDivAtivo",!1,!1,!0,!1)}return!0}return finalizarAnimacaImportar(),fCriarAlerta("AreaAlertaModalImportProv",TP_ALERTA_ERRO,i),!1}fCriarAlerta("AreaAlertaModalImportProv",TP_ALERTA_ERRO,i)},error:function(a,t,r){finalizarAnimacaImportar(),fCriarAlerta("AreaAlertaModalImportProv",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}})}catch(a){finalizarAnimacaImportar(),fCriarAlerta("AreaAlertaModalImportProv",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}async function fExcluirTodosDadosRendimento(a){try{promise=new Promise((t,r)=>{fLimparAreaAlerta("AreaAlertaModalImportProv"),$("#GridImport > tbody  > tr").each(function(){var t=$(this).find("td").eq(4).html(),r=$(this).find("td").eq(9).html();fExcluirDadosRendimento(a,r,t)}),buscar_todos_codigos_proventos(a,"selRendAtivo",!1,!0,!1,!0),buscar_todos_codigos_comprados_para_proventos(a,"selDivAtivo",!1,!1,!0,!1),t(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})}catch(a){fCriarAlerta("AreaAlertaModalImportProv",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fAbrirModalDetalheRendImportarProvCEI(a){try{fLimparAreaAlerta("AreaAlertaModalImportProvCEI"),$("#TxtDadosImportCEI").val(""),$("#AreaTableModalImportProvCEI").html(""),$("#PopModalImportProvCEI").modal({backdrop:"static"})}catch(a){fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}async function fExcluirTodosDadosRendimentoCEI(a){try{promise=new Promise((t,r)=>{fLimparAreaAlerta("AreaAlertaModalImportProvCEI"),$("#GridImport > tbody  > tr").each(function(){var t=$(this).find("td").eq(4).html(),r=$(this).find("td").eq(9).html();fExcluirDadosRendimento(a,r,t)}),buscar_todos_codigos_proventos(a,"selRendAtivo",!1,!0,!1,!0),buscar_todos_codigos_comprados_para_proventos(a,"selDivAtivo",!1,!1,!0,!1),t(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})}catch(a){fCriarAlerta("AreaAlertaModalImportProv",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}async function iniciarAnimacaoImportarCEI(){promise=new Promise((a,t)=>{$("#iImportarCEI").addClass("fa-spinner"),$("#iImportarCEI").addClass("fa-pulse"),a(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})}async function finalizarAnimacaImportarCEI(){promise=new Promise((a,t)=>{$("#iImportarCEI").removeClass("fa-spinner"),$("#iImportarCEI").removeClass("fa-pulse"),$("#iImportarCEI").addClass("fa fa-upload"),a(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})}function fImportarProvCEI(a){try{finalizarAnimacaImportarCEI(),fLimparAreaAlerta("AreaAlertaModalImportProvCEI");var t=$("#AreaTableModalImportProvCEI");t.html("");var r=$("#TxtDadosImportCEI").val().trim();if(""==r)return fCriarAlerta("AreaAlertaModalImportProvCEI",TP_ALERTA_AVISO,"Dados da CEI não informado"),!1;iniciarAnimacaoImportarCEI(),$.ajax({dataType:"json",type:"POST",async:!0,url:a+"proventos/importarcei",data:{DadosCEI:r},cache:!1,success:function(r){finalizarAnimacaImportarCEI();var e=r.data.Resultado,o=r.data.Mensagem,i=r.data.Lista;if("NSESSAO"==e)return $(location).attr("href",a+"/login"),!1;if("NOK"==e)return fCriarAlerta("AreaAlertaModalImportProvCEI",TP_ALERTA_AVISO,o),!1;if("FALHA"!=e){if("OK"==e){if(fCriarAlerta("AreaAlertaModalImportProvCEI",TP_ALERTA_SUCESSO,o),i.length>0){var n="";n+="<hr />",n+='<div class="form-group">',n+='  <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 text-right">',n+='    <a class="btn btn-sm btn-danger btn-round btn-simple text-center" style="font-size:14px;" title="Excluir Todos os Ativo Importados" href="javascript:void(0);" role="button" aria-pressed="true" onclick="fExcluirTodosDadosRendimentoCEI( \''+a+"', );\"> ",n+='       <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i> Excluir Todos ',n+="    </a>",n+="  </div>",n+="</div>",n+='<div class="table-responsive">',n+='<table id="GridImport" border="0" style="font-size: 11px" class="table table-sm table-hover table-condensed" cellspacing="0" width="100%">',n+='    <col width="10">',n+="  <thead>",n+='    <tr style="font-size: 11px" class="bg-secondary text-white text-center">',n+='      <th style="width:2px;">Linha</th>',n+='      <th style="width:12px;">Data Ex</th>',n+='      <th style="width:12px;">Data Pagto</th>',n+='      <th style="width:15px;">Tipo</th>',n+='      <th style="width:5px;">Ativo</th>',n+='      <th style="width:5px;">Quant.</th>',n+='      <th style="width:15px;">Preço Bruto</th>',n+='      <th style="width:15px;">Preço Líquido</th>',n+='      <th style="width:12px;">Situação</th>',n+='      <th style="width:10px;display: none; ">IdProv</th>',n+='      <th style="width:2px;">Ação</th>',n+="    </tr>",n+="  </thead>",n+="  <tbody>",$.each(i,function(t,r){CodAtivo=r[3],IdProv=r[8];var e="",o="Importado"==r[7]?"":" disabled";e+='<a class="btn btn-sm btn-danger btn-icon btn-icon-mini btn-round btn-simple'+o+'"'+o+' style="font-size:9px;" title="Excluir Provento '+CodAtivo+'" href="javascript:void(0);" role="button" aria-pressed="true" ',e+="   onclick=\"fExcluirDadosRendimento( '"+a+"', '"+IdProv+"', '"+CodAtivo+'\' );"> <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i> ',e+="</a>",n+='    <tr style="font-size: 10px" id="TrImport'+IdProv+'" class="text-center '+("Importado"==r[7]?"text-success":"text-danger")+'"> ',n+="      <td>"+colcarFormacataoInteiro(r[9].trim())+"</td>",n+="      <td>"+colcarFormacataoData(r[0])+"</td>",n+="      <td>"+colcarFormacataoData(r[1])+"</td>",n+="      <td>"+r[2]+"</td>",n+="      <td>"+r[3]+"</td>",n+="      <td>"+colcarFormacataoInteiro(r[4])+"</td>",n+="      <td>R$ "+r[5]+"</td>",n+="      <td>R$ "+r[6]+"</td>",n+="      <td>"+r[7]+"</td>",n+='      <td style="display: none;">'+r[8]+"</td>",n+="      <td>"+e+"</td>",n+="    </tr>"}),n+="  </tbody>",n+="</table>",n+="</div>",n+='<div class="form-group">',n+='  <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 text-right">',n+='    <a class="btn btn-sm btn-danger btn-round btn-simple text-center" style="font-size:14px;" title="Excluir Todos os Ativo Importados" href="javascript:void(0);" role="button" aria-pressed="true" onclick="fExcluirTodosDadosRendimentoCEI( \''+a+"', );\"> ",n+='       <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i> Excluir Todos ',n+="    </a>",n+="  </div>",n+="</div>",t.append(n),buscar_todos_codigos_proventos(a,"selRendAtivo",!1,!0,!1,!0),buscar_todos_codigos_comprados_para_proventos(a,"selDivAtivo",!1,!1,!0,!1)}return!0}return finalizarAnimacaImportar(),fCriarAlerta("AreaAlertaModalImportProvCEI",TP_ALERTA_ERRO,o),!1}fCriarAlerta("AreaAlertaModalImportProvCEI",TP_ALERTA_ERRO,o)},error:function(a,t,r){finalizarAnimacaImportar(),fCriarAlerta("AreaAlertaModalImportProvCEI",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}})}catch(a){finalizarAnimacaImportar(),fCriarAlerta("AreaAlertaModalImportProvCEI",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fAbrirModalLimparTodasRend(){try{fLimparAreaAlerta("AreaAlertaModalExcTds"),$("#PopModalDelTdsRend").modal({backdrop:"static"})}catch(a){$("#PopModalDelTdsRend").modal("hide"),fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}async function fExcluirTodosRendimento(a){try{promise=new Promise((t,r)=>{fLimparAreaAlerta("AreaAlertaModalExcTds"),$.ajax({dataType:"json",type:"post",url:a+"proventos/excluirtudo",data:{},success:function(t){var r=t.data.Resultado,e=t.data.Mensagem;return"NSESSAO"==r?($(location).attr("href",a+"/login"),!1):"NOK"==r?(fCriarAlerta("AreaAlertaModalExcTds",TP_ALERTA_AVISO,e),!1):"FALHA"==r?void fCriarAlerta("AreaAlertaModalExcTds",TP_ALERTA_ERRO,e):"OK"==r?($("#PopModalDelTdsRend").modal("hide"),fCriarAlertaPrinc(TP_ALERTA_SUCESSO,e),fCarregarGrid(a),fCarregarCodigoAtivos(a),buscar_todos_codigos_proventos(a,"selRendAtivo",!1,!0,!1,!0),buscar_todos_codigos_comprados_para_proventos(a,"selDivAtivo",!1,!1,!0,!1),!0):(fCriarAlerta("AreaAlertaModalExcTds",TP_ALERTA_ERRO,e),!1)},error:function(a){$("#PopModalDelTdsRend").modal("hide"),fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}),t(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})}catch(a){$("#PopModalDelTdsRend").modal("hide"),fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}$(document).ready(function(){promise=new Promise((a,t)=>{$("#MnPrincRedimentos").addClass("active open"),fLimparAreaAlertaPrinc(),fLimparAreaAlertaModalCad(),fLimparAreaAlertaModalExc(),fLimparAreaAlerta("AreaAlertaModalCadProv"),$("#txtDivQuant").bind("keyup change",function(){fCalcularDividendo()}),$("#txtDivPreco").bind("keyup change",function(){fCalcularDividendo()}),$("#selDivTipo").bind("change",function(){fMostrarCalcVlrLiq(),fMostrarValorBruto(),fCalcularDividendo()}),$("#txtDivCalcVlrLiq").bind("change",function(){fMostrarValorBruto(),fCalcularDividendo()}),$("#txtDivPrecoBruto").unbind("keyup"),$("#txtDivPrecoBruto").unbind("change"),a(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})});