function fLimparGrid(r){try{$("th").addClass("text-center"),$("#Grid").dataTable().fnClearTable(),$("#Grid").dataTable({bDestroy:!0}).fnDestroy(),$("#Grid").DataTable({data:[],oLanguage:fTraduzirGrid(),aoColumns:[{bSortable:!0,sWidth:"150px",targets:0},{bSortable:!0,sWidth:"50px",targets:1},{bSortable:!0,sWidth:"50px",targets:2},{visible:!1,targets:3},{bSortable:!0,sWidth:"50px",targets:4}],order:[],bFilter:!1,bInfo:!1,iDisplayLength:100,bLengthChange:!1,bSearchable:!1,bOrderable:!1,bSortable:!1,bAutoWidth:!1,bPaginate:!1,bOrdering:!1})}catch(r){fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fMontarGrid(r,a){try{$("#Grid").DataTable({processing:!0,serverSide:!1,oLanguage:fTraduzirGrid(),data:a,aoColumns:[{bSortable:!0,sWidth:"150px",targets:0},{bSortable:!0,sWidth:"50px",targets:1,render:function(r,a,t){return"display"==a&&""!=t[1]?FormatarCPFCNPJ(t[1]):r}},{bSortable:!0,sWidth:"50px",targets:2,render:function(r,a,t){return"display"==a?"R$ "+t[2]:r}},{visible:!1,targets:3},{bSortable:!0,sWidth:"50px",targets:4,render:function(a,t,e){var o="",i="";return"display"==t&&(IdCorret=e[3],o+='<div class="btn-group btn-group-sm" role="group" aria-label="Basic example">',o+='<a class="btn btn-sm btn-warning btn-icon btn-icon-mini btn-round btn-simple" style="font-size:0.5rem;" title="Alterar Corretora" href="javascript:void(0);" onclick="fAbrirModalDetalheCorret( \''+r+"', '"+IdCorret+"', 'Alterar' );\">",o+='   <i class="fa fa-pencil fa-lg" aria-hidden="true"></i> ',o+="</a>",i+='<a class="btn btn-sm btn-danger btn-icon btn-icon-mini btn-round btn-simple " style="font-size:0.5rem;" title="Excluir Corretora" href="javascript:void(0);" role="button" aria-pressed="true" onclick="fChamarPagExclusaoCorret( \''+IdCorret+"' );\">",i+='   <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i> ',i+="</a>",i+="</div>"),o+"&nbsp;"+i}}],createdRow:function(r,a,t){$("td",r).addClass("text-center")},initComplete:function(r,a){},order:[[0,"asc"]],iDisplayLength:100,bLengthChange:!1,bFilter:!1,bInfo:!1,bSearchable:!1,bPaginate:!1,bOrderable:!0,bSortable:!0,bOrdering:!0,searchable:!0,orderable:!0,bAutoWidth:!1}),$(document).ajaxError(function(a,t,e,o){fLimparGrid(r)})}catch(a){fLimparGrid(r),null!=a.description&&fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fCarregarGrid(r){try{fLimparAreaAlertaPrinc(),$("#Grid").dataTable().fnClearTable(),$("#Grid").dataTable({bDestroy:!0}).fnDestroy(),$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:r+"corretora/grid",data:{},success:function(a){var t=a.data.Resultado,e=a.data.Mensagem,o=a.data.Lista;return"NSESSAO"==t?($(location).attr("href",r+"/login"),!1):"NOK"==t?(fLimparGrid(r),void fCriarAlertaPrinc(TP_ALERTA_AVISO,e)):"FALHA"==t?(fLimparGrid(r),void fCriarAlertaPrinc(TP_ALERTA_ERRO,e)):"OK"!=t?(fLimparGrid(r),void fCriarAlertaPrinc(TP_ALERTA_ERRO,e)):void fMontarGrid(r,o)},error:function(a){return fLimparGrid(r),fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO),!1}})}catch(a){fLimparGrid(r),null!=a.description&&fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fLimparDadosModalCorret(){fLimparAreaAlertaModalCad(),$("#txtCadCorretId").val(""),$("#txtCadCorretoraLista").val(""),$("#txtCadCorretoraLista")[0].selectedIndex=0,$("#txtCadCorretCNPJ").val(""),$("#txtCadCorretNome").val(""),$("#txtCadCorretValor").val("0,00"),fDefinirPadraoSelect("txtCadCorretoraLista")}function fAbrirModalDetalheCorret(r,a,t){try{fLimparDadosModalCorret(),$("#PopModalDetalheCorretTit").html(" - "+t),$("#BtnModalDetalheCorretSalvar").removeAttr("disabled"),$("#BtnModalDetalheCorretSalvar").removeClass("disabled"),"Nova"!=t&&"Novo"!=t||$("#PopModalDetalheCorret").modal({backdrop:"static"}),"Alterar"!=t&&"Visualizar"!=t||fCarregarDadosModalDetalheCorret(r,a,t)}catch(r){fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fCarregarDadosModalDetalheCorret(r,a,t){try{if(""==a)return void fCriarAlertaPrinc(TP_ALERTA_AVISO,"Id. Corretora não informado!");$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:r+"corretora/carregar",data:{IdCorret:a},success:function(a){var t=a.data.Resultado,e=a.data.Mensagem,o=a.data.Dados;if("NSESSAO"==t)return $(location).attr("href",r+"/login"),!1;"NOK"==t?fCriarAlertaPrinc(TP_ALERTA_AVISO,e):"FALHA"==t?fCriarAlertaPrinc(TP_ALERTA_ERRO,e):"OK"==t&&o.Id?($("#txtCadCorretId").val(o.Id),$("#txtCadCorretNome").val(o.Nome),o.IdCorretoraLista&&($("#txtCadCorretoraLista").val(o.IdCorretoraLista),fDefinirPadraoSelect("txtCadCorretoraLista")),o.CNPJ&&$("#txtCadCorretCNPJ").val(FormatarCPFCNPJ(o.CNPJ)),$("#txtCadCorretValor").val(o.Valor),$("#PopModalDetalheCorret").modal({backdrop:"static"})):fCriarAlertaPrinc(TP_ALERTA_ERRO,e)},error:function(r){fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}})}catch(r){fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fValidarDados(){try{fLimparAreaAlertaModalCad();var r=$("#txtCadCorretNome").val(),a=(tirarFormacataoCPFCNPJ($("#txtCadCorretCNPJ").val()),$("#txtCadCorretValor").val(),"");return""==r&&(a+=" - Nome<br/>"),""==a||(fCriarAlertaModalCad(TP_ALERTA_AVISO,"Os seguintes campos não estão preenchido: <br/>"+a),!1)}catch(r){return fCriarAlertaModalCad(TP_ALERTA_ERRO,MSG_ALERTA_ERRO),!1}}function fSalvarDadosCorret(r){try{if(!fValidarDados())return!1;iniciarAnimacaoSalvar();var a=$("#txtCadCorretId").val(),t=$("#txtCadCorretoraLista").val(),e=$("#txtCadCorretCNPJ").val(),o=$("#txtCadCorretNome").val(),i=$("#txtCadCorretValor").val();$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:r+"corretora/salvar",data:{Id:a,IdCorretoraLista:t,CNPJ:tirarFormacataoCPFCNPJ(e),Nome:o,Valor:i},success:function(a){finalizarAnimacaoSalvar();var t=a.data.Resultado,e=a.data.Mensagem;if("NSESSAO"==t)return $(location).attr("href",r+"/login"),!1;"NOK"!=t?"FALHA"!=t&&"OK"==t?(fLimparDadosModalCorret(),$("#PopModalDetalheCorret").modal("hide"),fCriarAlertaPrinc(TP_ALERTA_SUCESSO,"Dados salvo com sucesso!"),fCarregarGrid(r)):fCriarAlertaModalCad(TP_ALERTA_ERRO,e):fCriarAlertaModalCad(TP_ALERTA_AVISO,e)},error:function(r){finalizarAnimacaoSalvar(),fCriarAlertaModalCad(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}})}catch(r){return finalizarAnimacaoSalvar(),void CriarAlertaModal(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fChamarPagExclusaoCorret(r){try{if($("#txtDelCorretId").val(""),""==r)return void fCriarAlertaPrinc(TP_ALERTA_AVISO,"Id. Corretora não informado!");$("#PopModalDelCorret").modal({backdrop:"static"}),$("#txtDelCorretId").val(r)}catch(r){$("#PopModalDelCorret").modal("hide"),finalizarAnimacaoExcluir(),fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fExcluirDadosCorret(r){try{finalizarAnimacaoExcluir();var a=$("#txtDelCorretId").val();if(""==a)return void fCriarAlertaModalExc(TP_ALERTA_AVISO,"Id. Corretora não informado!");iniciarAnimacaoExcluir(),$.ajax({dataType:"json",type:"post",url:r+"corretora/excluir",data:{IdCorret:a},success:function(a){finalizarAnimacaoExcluir();var t=a.data.Resultado,e=a.data.Mensagem;return"NSESSAO"==t?($(location).attr("href",r+"/login"),!1):"NOK"==t?(fCriarAlertaModalExc(TP_ALERTA_AVISO,e),!1):"FALHA"==t?void fCriarAlertaModalExc(TP_ALERTA_ERRO,e):"OK"==t?(fCriarAlertaPrinc(TP_ALERTA_SUCESSO,e),$("#txtDelCorretId").val(""),$("#PopModalDelCorret").modal("hide"),fCarregarGrid(r),!0):(fCriarAlertaModalExc(TP_ALERTA_ERRO,e),!1)},error:function(r){$("#PopModalDelCorret").modal("hide"),finalizarAnimacaoExcluir(),fCriarAlertaModalExc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}})}catch(r){$("#PopModalDelCorret").modal("hide"),finalizarAnimacaoExcluir(),fCriarAlertaModalExc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fBuscarDadosCorretoraLista(r){try{fLimparAreaAlerta("AreaAlertaModalCad"),$("#txtCadCorretCNPJ").val(""),$("#txtCadCorretNome").val("");var a=$("#txtCadCorretoraLista").val().trim();if(""==a)return;$.ajax({dataType:"json",type:"post",url:r+"corretora/carregarcorretorageral",data:{corretora:a},success:function(a){var t=a.data.Resultado,e=a.data.Mensagem,o=a.data.Dados;return"NSESSAO"==t?($(location).attr("href",r+"/login"),!1):"NOK"==t?(fCriarAlerta("AreaAlertaModalCad",TP_ALERTA_AVISO,e),!1):"FALHA"==t?void fCriarAlerta("AreaAlertaModalCad",TP_ALERTA_ERRO,e):"OK"==t?(o.CNPJ&&$("#txtCadCorretCNPJ").val(FormatarCPFCNPJ(o.CNPJ)),o.Nome&&$("#txtCadCorretNome").val(o.Nome),!0):(fCriarAlerta("AreaAlertaModalCad",TP_ALERTA_ERRO,e),!1)},error:function(r){fCriarAlerta("AreaAlertaModalCad",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}})}catch(r){fCriarAlerta("AreaAlertaModalCad",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}$(document).ready(function(){$("#MnPrincCorretora").addClass("active open"),fLimparAreaAlertaPrinc(),fLimparAreaAlertaModalCad(),fLimparAreaAlertaModalExc()});