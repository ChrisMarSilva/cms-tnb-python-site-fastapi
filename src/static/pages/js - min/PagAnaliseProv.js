function iniciarAnimacaoPesquisarAnaliseProv(){$("#iRefreshProv").addClass("fa-spin"),$("#btnAnaliseProvPesquisar").addClass("disabled")}function finalizarAnimacaoPesquisaAnaliseProv(){$("#iRefreshProv").removeClass("fa-spin"),$("#btnAnaliseProvPesquisar").removeClass("disabled")}async function fLimparGridAnaliseProv(a){promise=new Promise((e,t)=>{fLimparAreaAlerta("AreaAlertaPrincAnaliseProv"),$("#txtFiltroAnaliseProvDataIni").val(fDataAnoPrimeira()),$("#txtFiltroAnaliseProvDataFim").val(fDataAnoUltima()),$("#txtFiltroAnaliseProvAtivo").val(""),$("#txtFiltroAnaliseProvTipo").val(""),$("#txtFiltroAnaliseProvCorretora").val(""),$("#DivAnaliseProvTotal").text("R$ 0,00"),fLimparSomenteGridAnaliseProv(a),e(!0)}).then(a=>{}).catch(a=>{})}async function fLimparSomenteGridAnaliseProv(a){try{promise=new Promise((a,e)=>{finalizarAnimacaoPesquisaAnaliseProv(),$("th").addClass("text-center"),$("#GridAnaliseProv").dataTable().fnClearTable(),$("#GridAnaliseProv").dataTable({bDestroy:!0}).fnDestroy(),$("#GridAnaliseProv").DataTable({oLanguage:fTraduzirGrid(),aoColumns:[{bSortable:!0,sWidth:"50px",targets:0},{bSortable:!0,sWidth:"50px",targets:1},{bSortable:!0,sWidth:"50px",targets:2},{bSortable:!0,sWidth:"50px",targets:3},{bSortable:!0,sWidth:"50px",targets:4},{bSortable:!0,sWidth:"50px",targets:5},{bSortable:!0,sWidth:"50px",targets:6}],order:[],bFilter:!1,bInfo:!1,bLengthChange:!1,searchable:!1,orderable:!1,bAutoWidth:!1,bPaginate:!1,ordering:!1}),a(!0)}).then(a=>{}).catch(a=>{})}catch(a){fCriarAlerta("AreaAlertaPrincAnaliseProv",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}async function fMontarGridAnaliseProv(a,e){try{promise=new Promise((a,t)=>{var r=parseFloat(0);$("#GridAnaliseProv").DataTable({processing:!0,serverSide:!1,iDisplayLength:10,oLanguage:fTraduzirGrid(),data:e,aoColumns:[{bSortable:!0,sWidth:"50px",targets:0},{bSortable:!0,sWidth:"50px",targets:1},{bSortable:!0,sWidth:"50px",targets:2,render:function(a,e,t){return"display"==e?(Tipo=t[2],"DIVIDENDOS"==Tipo?'<span style="font-size:12px;" class="badge badge-success">'+Tipo+"</span>":"JRS CAP PRÓPRIO"==Tipo?'<span style="font-size:12px;" class="badge badge-primary">'+Tipo+"</span>":"REST CAP DIN"==Tipo?'<span style="font-size:12px;" class="badge badge-danger">'+Tipo+"</span>":"RENDIMENTO"==Tipo?'<span style="font-size:12px;" class="badge badge-warning">'+Tipo+"</span>":'<span style="font-size:12px;" class="badge badge-default">'+Tipo+"</span>"):a}},{bSortable:!0,sWidth:"50px",targets:3},{bSortable:!0,sWidth:"50px",targets:4},{bSortable:!0,sWidth:"50px",targets:5,render:function(a,e,t){return"display"==e?"R$ "+t[5]:a}},{bSortable:!0,sWidth:"50px",targets:6,render:function(a,e,t){return"display"==e?"R$ "+t[6]:a}}],createdRow:function(a,e,t){$("td",a).addClass("text-center"),r+=parseFloat(GetValorDecimal(e[6]))},initComplete:function(a,e){finalizarAnimacaoPesquisaAnaliseProv(),$("#DivAnaliseProvTotal").text("R$ "+fMascaraValor(r))},order:[],dom:"frtBpi",buttons:[{extend:"excelHtml5",text:'<i class="fa fa-file-excel-o"></i> Excel',className:"btn btn-outline-default btn-sm",title:NOME_PROJETO+" - Análise de Proventos",titleAttr:"Excel",exportOptions:{columns:[0,1,2,3,4,5,6]},customizeData:function(a){for(var e=0;e<a.body.length;e++)for(var t=0;t<a.body[e].length;t++)4==t&&(a.body[e][t]="‌"+a.body[e][t])}},{extend:"csvHtml5",charset:"UTF-8",fieldSeparator:";",titleAttr:"CSV",text:'<i class="fa fa-file-o"></i> CSV',className:"btn btn-outline-default btn-sm",title:NOME_PROJETO+" - Análise de Proventos",bom:!0,exportOptions:{columns:[0,1,2,3,4,5,6]}},{extend:"pdfHtml5",text:'<i class="fa fa-file-pdf-o"></i> PDF',className:"btn btn-default btn-sm",titleAttr:"PDF",title:NOME_PROJETO+" - Análise de Proventos",pageSize:"A3",alignment:"center",exportOptions:{columns:[0,1,2,3,4,5,6]},footer:!0,customize:function(a){a.defaultStyle.fontSize=12,a.styles.tableHeader.fontSize=14}},{extend:"print",text:'<i class="fa fa-print"></i> Imprimir',title:NOME_PROJETO+" - Análise de Proventos",titleAttr:"Imprimir",className:"btn btn-default btn-sm",exportOptions:{columns:[0,1,2,3,4,5,6]}}],bFilter:!1,bInfo:!1,bLengthChange:!1,searchable:!1,orderable:!1,bAutoWidth:!1,bPaginate:!1,ordering:!1}),a(!0)}).then(a=>{}).catch(a=>{})}catch(e){fLimparSomenteGridAnaliseProv(a),finalizarAnimacaoPesquisaAnaliseProv(),null!=e.description&&fCriarAlerta("AreaAlertaPrincAnaliseProv",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}async function fCarregarGridAnaliseProv(a){try{promise=new Promise((e,t)=>{fLimparAreaAlerta("AreaAlertaPrincAnaliseProv"),$("#GridAnaliseProv").dataTable().fnClearTable(),$("#GridAnaliseProv").dataTable({bDestroy:!0}).fnDestroy(),finalizarAnimacaoPesquisaAnaliseProv(),iniciarAnimacaoPesquisarAnaliseProv(),$("#DivAnaliseProvTotal").text("R$ 0,00");var r=$("#txtFiltroAnaliseProvAtivo").val().trim(),i=$("#txtFiltroAnaliseProvTipo").val().trim(),n=$("#txtFiltroAnaliseProvDataIni").val().trim(),o=$("#txtFiltroAnaliseProvDataFim").val().trim(),s=$("#txtFiltroAnaliseProvCorretora").val().trim();n=tirarFormacataoData(n),o=tirarFormacataoData(o),$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:a+"Analise/gridProv",data:{CodAtivo:r,TipoRend:i,Corretora:s,DataIni:n,DataFim:o},success:function(e){var t=e.data.Resultado,r=e.data.Mensagem,i=e.data.Lista;return"NSESSAO"==t?($(location).attr("href",a+"/login"),!1):"NOK"==t?(fLimparSomenteGridAnaliseProv(a),void fCriarAlerta("AreaAlertaPrincAnaliseProv",TP_ALERTA_AVISO,r)):"FALHA"==t?(fLimparSomenteGridAnaliseProv(a),void fCriarAlerta("AreaAlertaPrincAnaliseProv",TP_ALERTA_AVISO,r)):"OK"!=t?(fLimparSomenteGridAnaliseProv(a),void fCriarAlerta("AreaAlertaPrincAnaliseProv",TP_ALERTA_AVISO,r)):void fMontarGridAnaliseProv(a,i)},error:function(e){return fLimparSomenteGridAnaliseProv(a),fCriarAlerta("AreaAlertaPrincAnaliseProv",TP_ALERTA_AVISO,MSG_ALERTA_ERRO),!1}}),e(!0)}).then(a=>{}).catch(a=>{})}catch(e){fLimparSomenteGridAnaliseProv(a),null!=e.description&&fCriarAlerta("AreaAlertaPrincAnaliseProv",TP_ALERTA_AVISO,MSG_ALERTA_ERRO)}}