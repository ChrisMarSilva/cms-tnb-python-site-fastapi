function fBuscarListaProventosFII(t){try{promise=new Promise((a,r)=>{$("#DivListaCalendarioFII").html("");var e=$("#txtFiltroCalendFundo").val();e&&""!=e&&($("#txtFiltroCalendFundo").prop("disabled",!0),$("#DivListaCalendarioFII").html('<i class="fa fa-spinner fa-spin fa-3x" aria-hidden="true"> </i> <br/> <br/> <span style="font-size:12px;" class="txt-muted font-weight-bold">Carregando Proventos</span><br/> <span style="font-size:14px;" class="txt-muted font-weight-bold">'+e+"</span>"),$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:t+"calendario/grid",data:{TipoInvest:"FII",CodAtivo:e},success:function(a){var r=a.data.Resultado,e=a.data.Mensagem,o=a.data.Lista;if("NSESSAO"==r)return $("#DivListaCalendarioFII").html(""),$("#txtFiltroCalendFundo").prop("disabled",!1),$(location).attr("href",t+"/login"),!1;if("NOK"==r)return $("#DivListaCalendarioFII").html(""),$("#txtFiltroCalendFundo").prop("disabled",!1),void fCriarAlertaPrinc(TP_ALERTA_AVISO,e);if("FALHA"==r)return $("#DivListaCalendarioFII").html(""),$("#txtFiltroCalendFundo").prop("disabled",!1),void fCriarAlertaPrinc(TP_ALERTA_ERRO,e);if("OK"!=r)return $("#DivListaCalendarioFII").html(""),$("#txtFiltroCalendFundo").prop("disabled",!1),void fCriarAlertaPrinc(TP_ALERTA_ERRO,e);var n="";o&&o.length>0?$.each(o,function(t,a){a[0],a[1];var r=a[2],e=a[3],o=a[4],i=a[5];""!=o&&(o=colcarFormacataoData(o)),""==o&&(o="SEM PREVISÃO");var s="";if("R"==r&&(s="RENDIMENTO"),"E"==r&&(s="DESDOBRAMENTO"),"G"==r&&(s="GRUPAMENTO"),"B"==r&&(s="BONIFICAÇÃO"),"R"==r&&(n+=' <div class="text-center" style="border: 0px solid blue;">',n+=' <span class="font-weight-bold text-dark" style="font-size:14px;">'+s+"</span>",n+=" <br>",n+=' <span class="font-weight-bold text-secondary" style="font-size:12px;">Dt Ex: <span class="font-weight-normal text-muted" style="font-size:13px;">'+colcarFormacataoData(e)+"</span></span>",n+=" <br>",n+=' <span class="font-weight-bold text-secondary" style="font-size:12px;">Dt Pagto: <span class="font-weight-normal text-muted" style="font-size:13px;">'+o+"</span></span>",n+=" <br>",n+=' <span class="font-weight-bold text-secondary" style="font-size:12px;">Valor: <span class="font-weight-normal text-muted" style="font-size:13px;">R$ '+i.replace(".",",")+"</span></span>",n+=" </div>",n+=' <hr style="margin-top: 5px; margin-bottom: 5px;">'),"E"==r||"G"==r||"B"==r){var l=0;"E"==r&&(l=Math.round(1/i*100)),"G"==r&&(l=Math.round(1/i));var p="";"E"==r&&(p="1 para "+l),"G"==r&&(p=l+" para 1"),"B"==r&&(p=i+"%"),n+=' <div class="text-center" style="border: 0px solid blue;">',n+=' <span class="font-weight-bold text-dark" style="font-size:14px;">'+s+"</span>",n+=" <br>",n+=' <span class="font-weight-bold text-secondary" style="font-size:12px;">Dt Ex: <span class="font-weight-normal text-muted" style="font-size:13px;">'+colcarFormacataoData(e)+"</span></span>",n+=" <br>",n+=' <span class="font-weight-bold text-secondary" style="font-size:12px;">Valor: <span class="font-weight-normal text-muted" style="font-size:13px;">'+p+"</span></span>",n+=" </div>",n+=' <hr style="margin-top: 5px; margin-bottom: 5px;">'}}):n='<small style="font-size:14px;" class="font-italic text-muted">Nenhum provento encontrado...</small><br/>',$("#DivListaCalendarioFII").html(n),$("#txtFiltroCalendFundo").prop("disabled",!1)},error:function(t){return $("#DivListaCalendarioFII").html(""),$("#txtFiltroCalendFundo").prop("disabled",!1),fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO),!1}}),a(!0))}).then(t=>{}).catch(t=>{})}catch(t){return $("#DivListaCalendarioFII").html(""),$("#txtFiltroCalendFundo").prop("disabled",!1),void fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fCarregarListaProventoFII(t){try{promise=new Promise((a,r)=>{$("#calendarFII").fullCalendar({defaultDate:fDataAtual(),displayEventTime:!1,eventStartEditable:!1,height:600,contentHeight:550,weekends:!0,footer:!0,ignoreTimezone:!1,editable:!1,businessHours:!0,locale:"pt-br",titleFormat:"MMMM YYYY",defaultView:"month",monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-Feira","Terça-Feira","Quarta-Feira","Quinta-Feira","Sexta-Feira","Sabado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],header:{left:"prev,next today",center:"title",right:"month,listWeek,listDay,listMonth",close:"fa-times",prev:"fa-chevron-left",next:"fa-chevron-right",prevYear:"fa-angle-double-left",nextYear:"fa-angle-double-right"},views:{month:{titleFormat:"MMMM YYYY"},week:{titleFormat:"D MMMM YYYY"},day:{titleFormat:"ddd, d MMMM YYYY"},listDay:{buttonText:"Dia"},listWeek:{buttonText:"Semana"},listMonth:{buttonText:"Lista"}},eventLimit:!0,themeSystem:"standard",navLinks:!0,eventSources:[{textColor:"#31708f",color:"#d9edf7",backgroundColor:"#b9def0",borderColor:"#9acfea",events:function(a,r,e,o){$(".popover").popover("hide"),$.ajax({url:t+"calendario/lista",dataType:"json",cache:"false",async:!0,type:"POST",data:{TipoInvest:"FII",TpLista:"DTEX",DataIni:a.format("YYYYMMDD"),DataFim:r.format("YYYYMMDD")},error:function(){return fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO),!1},success:function(a){var r=a.data.Resultado,e=a.data.Mensagem,n=a.data.Lista;if("NSESSAO"==r)return $(location).attr("href",t+"/login"),!1;if("NOK"!=r)if("FALHA"!=r)if("OK"==r){var i=[];$.each(n,function(t,a){var r,e=a[0],o="",n=a[1],s=a[2],l=a[3],p=a[4],d=a[5];"R"==s&&(o=n+" Ex Rendimento"),r=l,i.push({id:e,start:r,title:o,codigo:n,provTipo:s,provDtEx:l,provDtPagto:p,provValor:d})}),o(i)}else fCriarAlertaPrinc(TP_ALERTA_ERRO,e);else fCriarAlertaPrinc(TP_ALERTA_ERRO,e);else fCriarAlertaPrinc(TP_ALERTA_AVISO,e)}})}},{color:"#dff0d8",textColor:"#3c763d",backgroundColor:"#c8e5bc",borderColor:"#b2dba1",events:function(a,r,e,o){$.ajax({url:t+"calendario/lista",dataType:"json",cache:"false",async:!0,type:"POST",data:{TipoInvest:"FII",TpLista:"DTPAGTO",DataIni:a.format("YYYYMMDD"),DataFim:r.format("YYYYMMDD")},error:function(){return fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO),!1},success:function(a){var r=a.data.Resultado,e=a.data.Mensagem,n=a.data.Lista;if("NSESSAO"==r)return $(location).attr("href",t+"/login"),!1;if("NOK"!=r)if("FALHA"!=r)if("OK"==r){var i=[];$.each(n,function(t,a){var r,e=a[0],o="",n=a[1],s=a[2],l=a[3],p=a[4],d=a[5];"R"==s&&(o=n+" Pagto Rendimento"),r=p,i.push({id:e,start:r,title:o,codigo:n,provTipo:s,provDtEx:l,provDtPagto:p,provValor:d})}),o(i)}else fCriarAlertaPrinc(TP_ALERTA_ERRO,e);else fCriarAlertaPrinc(TP_ALERTA_ERRO,e);else fCriarAlertaPrinc(TP_ALERTA_AVISO,e)}})}},{color:"#FFFFAA",textColor:"#555500",backgroundColor:"#D4D46A",borderColor:"#808015",events:function(a,r,e,o){$.ajax({url:t+"calendario/lista",dataType:"json",cache:"false",async:!0,type:"POST",data:{TipoInvest:"FII",TpLista:"COMPRA",DataIni:a.format("YYYYMMDD"),DataFim:r.format("YYYYMMDD")},error:function(){return fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO),!1},success:function(a){var r=a.data.Resultado,e=a.data.Mensagem,n=a.data.Lista;if("NSESSAO"==r)return $(location).attr("href",t+"/login"),!1;if("NOK"!=r)if("FALHA"!=r)if("OK"==r){var i=[];$.each(n,function(t,a){var r,e,o=a[0],n=a[1],s=a[2],l=a[3],p=a[4],d=a[5],c=a[6];r=n+" "+s+" "+colcarFormacataoInteiro(p),e=l,i.push({id:o,start:e,title:r,codigo:n,operTipo:s,operData:l,operQuant:p,operPreco:d,operTotal:c})}),o(i)}else fCriarAlertaPrinc(TP_ALERTA_ERRO,e);else fCriarAlertaPrinc(TP_ALERTA_ERRO,e);else fCriarAlertaPrinc(TP_ALERTA_AVISO,e)}})}},{color:"#E498AF",textColor:"#4C0017",backgroundColor:"#BE5F7C",borderColor:"#4C0017",events:function(a,r,e,o){$.ajax({url:t+"calendario/lista",dataType:"json",cache:"false",async:!0,type:"POST",data:{TipoInvest:"FII",TpLista:"VENDA",DataIni:a.format("YYYYMMDD"),DataFim:r.format("YYYYMMDD")},error:function(){return fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO),!1},success:function(a){var r=a.data.Resultado,e=a.data.Mensagem,n=a.data.Lista;if("NSESSAO"==r)return $(location).attr("href",t+"/login"),!1;if("NOK"!=r)if("FALHA"!=r)if("OK"==r){var i=[];$.each(n,function(t,a){var r,e,o=a[0],n=a[1],s=a[2],l=a[3],p=a[4],d=a[5],c=a[6];r=n+" "+s+" "+colcarFormacataoInteiro(p),e=l,i.push({id:o,start:e,title:r,codigo:n,operTipo:s,operData:l,operQuant:p,operPreco:d,operTotal:c})}),o(i)}else fCriarAlertaPrinc(TP_ALERTA_ERRO,e);else fCriarAlertaPrinc(TP_ALERTA_ERRO,e);else fCriarAlertaPrinc(TP_ALERTA_AVISO,e)}})}},{events:function(a,r,e,o){$.ajax({url:t+"calendario/lista",dataType:"json",cache:"false",async:!0,type:"POST",data:{TipoInvest:"FII",TpLista:"OUTROS",DataIni:a.format("YYYYMMDD"),DataFim:r.format("YYYYMMDD")},error:function(){return fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO),!1},success:function(a){var r=a.data.Resultado,e=a.data.Mensagem,n=a.data.Lista;if("NSESSAO"==r)return $(location).attr("href",t+"/login"),!1;if("NOK"!=r)if("FALHA"!=r)if("OK"==r){var i=[];$.each(n,function(t,a){var r,e=a[0],o="",n=a[1],s=a[2],l=a[3],p=a[4],d=a[5];"E"==s&&(o=n+" Desdobro"),"G"==s&&(o=n+" Grupar"),"B"==s&&(o=n+" Bonificar"),r=l;var c=0;"E"==s&&(c=Math.round(1/d*100)),"G"==s&&(c=Math.round(1/d));var f="";"E"==s&&(f="1 para "+c),"G"==s&&(f=c+" para 1"),"B"==s&&(f=d+"%"),i.push({id:e,start:r,title:o,codigo:n,provTipo:s,provDtEx:l,provDtPagto:p,provValor:f})}),o(i)}else fCriarAlertaPrinc(TP_ALERTA_ERRO,e);else fCriarAlertaPrinc(TP_ALERTA_ERRO,e);else fCriarAlertaPrinc(TP_ALERTA_AVISO,e)}})}}],eventRender:function(t,a,r){a.attr("href","javascript:void(0);"),popoverElement=a.popover({html:!0,animation:!0,title:'<span class="text-muted">'+t.codigo+'</span> <button type="button" id="closepopover" class="close" onclick="fFecharPopoverFII();">&times;</button>',container:"body",trigger:"click",placement:"top",content:function(){if($(".popover").popover("hide"),setTimeout(function(){a.popover("hide")},1e4),""!=t.provDtPagto&&(t.provDtPagto=colcarFormacataoData(t.provDtPagto)),""==t.provDtPagto&&(t.provDtPagto="SEM PREVISÃO"),t.provTipo){if("R"==t.provTipo){var r="";return"R"==t.provTipo&&(r="RENDIMENTO"),'<table border="0" >  <tr>    <td colspan="2" style="text-align:center;"> <span style="font-size:12px; color:gray; font-weight:bold;">'+r+'</span> </td>  </tr>  <tr>    <td style="text-align:right;"> <span style="font-size:12px; color:gray;">Data Ex:</span> </td>    <td> <span style="font-size : 12px; color:gray; font-weight:bold;">&nbsp;'+colcarFormacataoData(t.provDtEx)+'</span> </td>  </tr>  <tr>    <td style="text-align:right;">  <span style="font-size:12px; color:gray;">Data Pagto:</span> </td>    <td> <span style="font-size:12px; color:gray; font-weight:bold;">&nbsp;'+t.provDtPagto+'</span> </td>  </tr>  <tr>    <td style="text-align:right;"> <span style="font-size : 12px; color:gray;">Valor:</span> </td>    <td> <span style="font-size:12px; color:gray; font-weight:bold;">&nbsp;R$ '+t.provValor.replace(".",",")+'</span> </td>  </tr>  <tr>    <td colspan="2"> &nbsp; </td>  </tr><table>'}if("E"==t.provTipo||"G"==t.provTipo||"B"==t.provTipo){r="";return"E"==t.provTipo&&(r="DESDOBRAMENTO"),"G"==t.provTipo&&(r="GRUPAMENTO"),"B"==t.provTipo&&(r="BONIFICAÇÃO"),'<table border="0" >  <tr>    <td colspan="2" style="text-align:center;"> <span style="font-size:12px; color:gray; font-weight:bold;">'+r+'</span> </td>  </tr>  <tr>    <td style="text-align:right;"> <span style="font-size:12px; color:gray;">Data Ex:</span> </td>    <td> <span style="font-size : 12px; color:gray; font-weight:bold;">&nbsp;'+colcarFormacataoData(t.provDtEx)+'</span> </td>  </tr>  <tr>    <td style="text-align:right;"> <span style="font-size : 12px; color:gray;">Valor:</span> </td>    <td> <span style="font-size:12px; color:gray; font-weight:bold;">&nbsp;'+t.provValor.replace(".",",")+'</span> </td>  </tr>  <tr>    <td colspan="2"> &nbsp; </td>  </tr><table>'}}if(t.operTipo)return'<table border="0" >  <tr>    <td colspan="2" style="text-align:center;"> <span style="font-size:12px; color:gray; font-weight:bold;">'+t.operTipo+'</span> </td>  </tr>  <tr>    <td style="text-align:right;"> <span style="font-size:12px; color:gray;">Data:</span> </td>    <td> <span style="font-size : 12px; color:gray; font-weight:bold;">&nbsp;'+colcarFormacataoData(t.operData)+'</span> </td>  </tr>  <tr>    <td style="text-align:right;">  <span style="font-size:12px; color:gray;">Quant:</span> </td>    <td> <span style="font-size:12px; color:gray; font-weight:bold;">&nbsp;R$ '+colcarFormacataoInteiro(t.operQuant)+'</span> </td>  </tr>  <tr>    <td style="text-align:right;"> <span style="font-size : 12px; color:gray;">Preço:</span> </td>    <td> <span style="font-size:12px; color:gray; font-weight:bold;">&nbsp;R$ '+t.operPreco+'</span> </td>  </tr>  <tr>    <td style="text-align:right;"> <span style="font-size : 12px; color:gray;">Total:</span> </td>    <td> <span style="font-size:12px; color:gray; font-weight:bold;">&nbsp;R$ '+t.operTotal+'</span> </td>  </tr>  <tr>    <td colspan="2"> &nbsp; </td>  </tr><table>'}}).popover("show")}}),a(!0)}).then(t=>{}).catch(t=>{})}catch(t){return void fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fFecharPopoverFII(){$(".popover").click(function(){$(this).popover("hide")})}