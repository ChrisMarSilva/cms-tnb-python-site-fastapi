function iniciarAnimacaoPesquisar(){$("#iRefresh").addClass("fa-spin"),$("#btnInvPesquisar").addClass("disabled"),$("#btnInvLimpar").addClass("disabled")}function finalizarAnimacaoPesquisa(){$("#iRefresh").removeClass("fa-spin"),$("#btnInvPesquisar").removeClass("disabled"),$("#btnInvLimpar").removeClass("disabled")}function fLimparGrid(a){$("#selFiltroSituacao").val(""),$("#txtFiltroDataIni").val(fDataAtual()),$("#txtFiltroDataFim").val(fDataAtual()),fLimparSomenteGrid(a)}function fLimparSomenteGrid(a){try{finalizarAnimacaoPesquisa(),$("th").addClass("text-center"),$("#Grid").dataTable().fnClearTable(),$("#Grid").dataTable({bDestroy:!0}).fnDestroy(),$("#Grid").DataTable({oLanguage:fTraduzirGrid(),aoColumns:[{bSortable:!0,sWidth:"100px",targets:0},{bSortable:!0,sWidth:"100px",targets:1},{bSortable:!0,sWidth:"20px",targets:2},{bSortable:!0,sWidth:"20px",targets:3},{bSortable:!0,sWidth:"20px",targets:4},{bSortable:!0,sWidth:"20px",targets:5},{bSortable:!0,sWidth:"20px",targets:6},{bSortable:!0,sWidth:"20px",targets:7},{bSortable:!0,sWidth:"20px",targets:8},{bSortable:!0,sWidth:"20px",targets:9},{bSortable:!0,sWidth:"20px",targets:10},{bSortable:!0,sWidth:"20px",targets:11},{bSortable:!0,sWidth:"30px",targets:12},{bSortable:!0,sWidth:"30px",targets:13},{visible:!1,targets:14},{bSortable:!0,sWidth:"20px",targets:15}],bLengthChange:!1,bFilter:!0,searchable:!0,orderable:!0,bAutoWidth:!1})}catch(a){fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fMontarGrid(a,r){try{$("#Grid").DataTable({processing:!0,responsive:!0,serverSide:!1,oLanguage:fTraduzirGrid(),data:r,aoColumns:[{bSortable:!1,sWidth:"20px",targets:0,render:function(r,t,i){return"display"==t?'<img src="'+(""!=i[0]?i[0]:a+"static/pages/img/pessoa-icon.png")+'" alt="" width="25" height="25" class="rounded-circle">':r}},{bSortable:!0,sWidth:"40px",targets:1},{bSortable:!0,sWidth:"80px",targets:2},{bSortable:!0,sWidth:"30px",targets:3,render:function(a,r,t){return"display"==r?colcarFormacataoData(t[3]):a}},{bSortable:!0,sWidth:"20px",targets:4,render:function(a,r,t){return"display"==r?colcarFormacataoInteiro(t[4]):a}},{bSortable:!0,sWidth:"20px",targets:5,render:function(a,r,t){return"display"==r?colcarFormacataoInteiro(t[5]):a}},{bSortable:!0,sWidth:"20px",targets:6,render:function(a,r,t){return"display"==r?colcarFormacataoInteiro(t[6]):a}},{bSortable:!0,sWidth:"20px",targets:7,render:function(a,r,t){return"display"==r?colcarFormacataoInteiro(t[7]):a}},{bSortable:!0,sWidth:"20px",targets:8,render:function(a,r,t){return"display"==r?colcarFormacataoInteiro(t[8]):a}},{bSortable:!0,sWidth:"20px",targets:9,render:function(a,r,t){return"display"==r?colcarFormacataoInteiro(t[9]):a}},{bSortable:!0,sWidth:"20px",targets:10,render:function(a,r,t){return"display"==r?colcarFormacataoInteiro(t[10]):a}},{bSortable:!0,sWidth:"20px",targets:11,render:function(a,r,t){return"display"==r?colcarFormacataoDataHora(t[11]):a}},{bSortable:!0,sWidth:"20px",targets:12,render:function(a,r,t){return"display"==r?colcarFormacataoDataHora(t[12]):a}},{bSortable:!0,sWidth:"20px",targets:13},{visible:!1,targets:14},{bSortable:!1,sWidth:"40px",targets:15,render:function(r,t,i){var e="",o="",n="",s="",l="",d="";return"display"==t&&(NmUsuario=i[1],Situacao=i[13],IdUsuario=i[14],d="","Ativo"==Situacao&&(d=" disabled"),e+='<div class="btn-group btn-group-sm" role="group" aria-label="Basic example">',e+='<a class="btn btn-sm btn-success btn-icon btn-icon-mini btn-round btn-simple'+d+'"'+d+' style="font-size:8px;" title="Ativar" href="javascript:void(0);"  onclick="fAlterarSituacaoInvestidor( \''+a+"', '"+IdUsuario+"', 'A' );\">",e+='   <i class="fa fa-check" aria-hidden="true"></i> ',e+="</a>",o+='<a class="btn btn-sm btn-warning btn-icon btn-icon-mini btn-round btn-simple" style="font-size:9px;" title="Alterar Nome" href="javascript:void(0);" onclick="fChamarPagAlterarNomeInvest( \''+IdUsuario+"', '"+NmUsuario+"' );\">",o+='   <i class="fa fa-pencil fa-lg" aria-hidden="true"></i> ',o+="</a>",d="","Inativo"!=Situacao&&"Aguardando Confirmação de Email"!=Situacao&&"Bloqueado"!=Situacao||(d=" disabled"),n+='<a class="btn btn-sm btn-secondary btn-icon btn-icon-mini btn-round btn-simple'+d+'"'+d+' style="font-size:8px;" title="Inativar" href="javascript:void(0);" onclick="fAlterarSituacaoInvestidor(  \''+a+"', '"+IdUsuario+"', 'I' );\">",n+='   <i class="fa fa-eye-slash" aria-hidden="true"></i> ',n+="</a>",d="","Bloqueado"==Situacao&&(d=" disabled"),s+='<a class="btn btn-sm btn-dark btn-icon btn-icon-mini btn-round btn-simple'+d+'"'+d+' style="font-size:8px;" title="Bloquar" href="javascript:void(0);" onclick="fAlterarSituacaoInvestidor(  \''+a+"', '"+IdUsuario+"', 'X' );\">",s+='   <i class="fa fa-lock" aria-hidden="true"></i> ',s+="</a>",l+='<a class="btn btn-sm btn-danger btn-icon btn-icon-mini btn-round btn-simple'+(d="")+'"'+d+' style="font-size:8px;" title="Excluir" href="javascript:void(0);" role="button" aria-pressed="true" onclick="fChamarPagExclusaoInv( \''+IdUsuario+"' );\">",l+='   <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i> ',l+="</a>",l+="</div>"),e+"&nbsp;"+o+"&nbsp;"+n+"&nbsp;"+s+"&nbsp;"+l}}],createdRow:function(a,r,t){$("td",a).addClass("text-center"),Situacao=r[13],"Ativo"==Situacao&&$("td",a).addClass("text-success"),"Inativo"==Situacao&&$("td",a).addClass("text-secondary"),"Bloqueado"==Situacao&&$("td",a).addClass("text-danger")},initComplete:function(a,r){finalizarAnimacaoPesquisa()},order:[[9,"desc"]],pageLength:100,bLengthChange:!1,bFilter:!0,bInfo:!0,searchable:!0,orderable:!0,bAutoWidth:!0})}catch(r){fLimparSomenteGrid(a),finalizarAnimacaoPesquisa(),null!=r.description&&fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fCarregarGrid(a){try{fLimparAreaAlertaPrinc(),$("#Grid").dataTable().fnClearTable(),$("#Grid").dataTable({bDestroy:!0}).fnDestroy(),finalizarAnimacaoPesquisa(),iniciarAnimacaoPesquisar();var r=$("#selFiltroSituacao").val().trim(),t=$("#txtFiltroDataIni").val().trim(),i=$("#txtFiltroDataFim").val().trim();$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:a+"investidor/grid",data:{Situacao:r,DataIni:tirarFormacataoData(t),DataFim:tirarFormacataoData(i)},success:function(r){var t=r.data.Resultado,i=r.data.Mensagem,e=r.data.Lista;return"NSESSAO"==t?($(location).attr("href",a+"/login"),!1):"NOK"==t?(finalizarAnimacaoPesquisa(),fLimparSomenteGrid(a),void fCriarAlertaPrinc(TP_ALERTA_AVISO,i)):"FALHA"==t?(finalizarAnimacaoPesquisa(),fLimparSomenteGrid(a),void fCriarAlertaPrinc(TP_ALERTA_ERRO,i)):"OK"!=t?(finalizarAnimacaoPesquisa(),fLimparSomenteGrid(a),void fCriarAlertaPrinc(TP_ALERTA_ERRO,i)):void fMontarGrid(a,e)},error:function(r){return finalizarAnimacaoPesquisa(),fLimparSomenteGrid(a),fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO),!1}})}catch(r){finalizarAnimacaoPesquisa(),fLimparSomenteGrid(a),null!=r.description&&fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fChamarPagExclusaoInv(a){try{if($("#txtIdUserDel").val(""),""==a)return void fCriarAlertaPrinc(TP_ALERTA_AVISO,"Id. Usuário não informado!");$("#PopModalDelInv").modal({backdrop:"static"}),$("#txtIdUserDel").val(a)}catch(a){$("#PopModalDelInv").modal("hide"),finalizarAnimacaoExcluir(),fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fExcluirDadosInvestidor(a){try{finalizarAnimacaoExcluir();var r=$("#txtIdUserDel").val();if(""==r)return void fCriarAlertaModalExc(TP_ALERTA_AVISO,"Id. Usuário não informado!");iniciarAnimacaoExcluir(),$.ajax({dataType:"json",type:"post",url:a+"investidor/excluir",data:{IdUsuario:r},success:function(r){finalizarAnimacaoExcluir();var t=r.data.Resultado,i=r.data.Mensagem;return"NSESSAO"==t?($(location).attr("href",a+"/login"),!1):"NOK"==t?(fCriarAlertaModalExc(TP_ALERTA_AVISO,i),!1):"FALHA"==t?void fCriarAlertaModalExc(TP_ALERTA_ERRO,i):"OK"==t?(fCriarAlertaPrinc(TP_ALERTA_SUCESSO,i),$("#txtIdUserDel").val(""),$("#PopModalDelInv").modal("hide"),fCarregarGrid(a),!0):(fCriarAlertaModalExc(TP_ALERTA_ERRO,i),!1)},error:function(a,r,t){finalizarAnimacaoExcluir(),fCriarAlertaModalExc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}})}catch(a){$("#PopModalDelInv").modal("hide"),finalizarAnimacaoExcluir(),fCriarAlertaModalExc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fAlterarSituacaoInvestidor(a,r,t){try{if(""==r)return void fCriarAlertaPrinc(TP_ALERTA_AVISO,"Id. Usuário não informado!");if(""==t)return void fCriarAlertaPrinc(TP_ALERTA_AVISO,"Situação não informado!");$.ajax({dataType:"json",type:"post",url:a+"investidor/alterarsituacao",data:{IdUsuario:r,Situacao:t},success:function(r){var t=r.data.Resultado,i=r.data.Mensagem;return"NSESSAO"==t?($(location).attr("href",a+"/login"),!1):"NOK"==t?(fCriarAlertaModalExc(TP_ALERTA_AVISO,i),!1):"FALHA"==t?void fCriarAlertaModalExc(TP_ALERTA_ERRO,i):"OK"==t?(fCriarAlertaPrinc(TP_ALERTA_SUCESSO,i),fCarregarGrid(a),!0):(fCriarAlertaModalExc(TP_ALERTA_ERRO,i),!1)},error:function(a){fCriarAlertaModalExc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}})}catch(a){fCriarAlertaModalExc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fChamarPagAlterarNomeInvest(a,r){try{if($("#txtInvestNmIdUsuario").val(""),$("#txtInvestNmNomeUsuario").val(""),""==a)return void fCriarAlertaPrinc(TP_ALERTA_AVISO,"Id. Usuário não informado!");r.indexOf(")")>0&&(r=r.substring(r.indexOf(")")+2,r.length)),$("#txtInvestNmIdUsuario").val(a),$("#txtInvestNmNomeUsuario").val(r),$("#PopModalDetalheIvestidorNome").modal({backdrop:"static"})}catch(a){$("#PopModalDetalheIvestidorNome").modal("hide"),fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fAlterarNomeInvestidor(a){try{var r=$("#txtInvestNmIdUsuario").val(),t=$("#txtInvestNmNomeUsuario").val();if(""==r)return void fCriarAlertaModalCad(TP_ALERTA_AVISO,"Id. Usuário não informado!");if(""==t)return void fCriarAlertaModalCad(TP_ALERTA_AVISO,"Nome não informado!");$.ajax({dataType:"json",type:"post",url:a+"investidor/alterarnome",data:{IdUsuario:r,NomeUsuario:t},success:function(r){var t=r.data.Resultado,i=r.data.Mensagem;return"NSESSAO"==t?($(location).attr("href",a+"/login"),!1):"NOK"==t?(fCriarAlertaModalCad(TP_ALERTA_AVISO,i),!1):"FALHA"==t?void fCriarAlertaModalCad(TP_ALERTA_ERRO,i):"OK"==t?($("#PopModalDetalheIvestidorNome").modal("hide"),fCriarAlertaPrinc(TP_ALERTA_SUCESSO,i),fCarregarGrid(a),!0):(fCriarAlertaModalCad(TP_ALERTA_ERRO,i),!1)},error:function(a){fCriarAlertaModalCad(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}})}catch(a){fCriarAlertaModalCad(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}$(document).ready(function(){$("#MnPrincinvestidor").addClass("active open"),fLimparAreaAlertaPrinc(),fLimparAreaAlertaModalCad()});