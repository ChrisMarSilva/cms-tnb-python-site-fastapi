async function fCarrgarDadosCalendario(a){try{promise=new Promise((t,r)=>{$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:a+"principal/carregarCalendario",success:function(t){var r=t.data.Resultado,e=t.data.Mensagem,o=t.data.Lista;if("NSESSAO"==r)return $(location).attr("href",a+"/login"),!1;if("NOK"==r)return fCriarAlertaPrinc(TP_ALERTA_AVISO,e),!1;if("FALHA"==r)return fCriarAlertaPrinc(TP_ALERTA_ERRO,e),!1;if("OK"!=r)return fCriarAlertaPrinc(TP_ALERTA_ERRO,e),!1;var i="";o.length>0?(i+='<div class="table-responsive-sm">',i+='  <table id="GridCalProv" style="font-size: 11px; widt:100%" class="table table-sm table-b ordered table-hover table-condensed table-borderless nowrap" cellpadding="0" cellspacing="0">',i+="    <thead>",i+='      <tr class="thead-dark font-weight-bold text-center">',i+="        <th>Dt. Ex</th>",i+="        <th>Dt. Pagto</th>",i+="        <th>Ativo</th>",i+="        <th>Tipo</th>",i+="        <th>Preço/Quant.</th>",i+="        <th>Ação</th>",i+="      </tr>",i+="    </thead>",i+="    <tbody>",$.each(o,function(t,r){var e=r[0],o=r[1],l=r[2],n=r[3],c=r[4],s=r[5],d=r[6];if("D"==l||"J"==l||"R"==l||"B"==l||"E"==l||"G"==l||"FR"==l){var A="";if("D"==l&&(A="DIVIDENDO"),"J"==l&&(A="JRS CAP PRÓPRIO"),"B"==l&&(A="BONIFICAÇÃO"),"E"==l&&(A="DESDOBRAMENTO"),"G"==l&&(A="GRUPAMENTO"),"R"==l&&(A="REST CAP DIN"),"FR"==l&&(A="REDIMENTO"),"D"!=l&&"J"!=l&&"R"!=l&&"FR"!=l||(i+='      <tr id="TrProvDivulg-'+l+"-"+o+"-"+e+'">',i+="        <td>"+colcarFormacataoData(n)+"</td>",i+="        <td>"+colcarFormacataoData(c)+"</td>",i+='        <td class="font-weight-bold">'+o+"</td>",i+='        <td class="fon t-weight-bold">'+A+"</td>",i+='        <td  class="text-left font-weight-bold">'+s.replace(".",",")+"</td>",i+="        <td>",i+='            <a class="text-success" style="float: center; font-size:10px;" title="Adicionar Provento" href="javascript:void(0)" onclick="fAbrirModalDetalheRendCalend( \''+a+"', '"+l+"', '"+o+"', '"+n+"', '"+c+"', '"+s.replace(".",",")+"', '"+d+"' );\">",i+='              <i class="fa fa-plus-circle fa-2x" aria-hidden="true"></i>',i+="            </a>",i+="            &nbsp;",i+='            <a class="text-danger" style="float: center; font-size:10px;" title="Remover Provento" href="javascript:void(0)" onclick="fRemoverProventDivulg( \''+a+"', '"+e+"', '"+o+"', '"+l+"', '"+n+"' );\">",i+='              <i class="fa fa-minus-square-o fa-2x" aria-hidden="true"></i>',i+="            </a>",i+="        </td>",i+="      </tr>"),"B"==l||"E"==l||"G"==l){var f="";"B"==l&&(f="B"),"E"==l&&(f="D"),"G"==l&&(f="G");var R=100;"E"==l&&(R=Math.round(s/100+1)),"G"==l&&(R=Math.round(100/s*1));var v="";"E"==l&&(v="1 para "+R),"G"==l&&(v=R+" para 1"),"B"==l&&(v=s.replace(".",",")+"%");var E="";"B"==l&&(E=s.replace(".",","));var h="";"E"==l&&(h=n),"G"==l&&(h=n),"B"==l&&(h=n),i+='      <tr id="TrProvDivulg-'+l+"-"+o+"-"+e+'">',i+="        <td>"+colcarFormacataoData(n)+"</td>",i+="        <td>"+colcarFormacataoData(c)+"</td>",i+='        <td class="font-weight-bold">'+o+"</td>",i+='        <td class="font-weight-bold">'+A+"</td>",i+='        <td class="text-left font-weight-bold">'+v+"</td>",i+="        <td>",i+='            <a class="text-success" style="float: center; font-size:10px;" title="Adicionar Operação" href="javascript:void(0)" onclick="fAbrirModalDetalheOper( \''+a+"', '', 'Novo', '"+f+"', '"+o+"', '"+R+"', '"+E+"' , '"+h+"' );\">",i+='              <i class="fa fa-plus-circle fa-2x" aria-hidden="true"></i>',i+="            </a>",i+="            &nbsp;",i+='            <a class="text-danger" style="float: center; font-size:10px;" title="Remover Operação" href="javascript:void(0)" onclick="fRemoverProventDivulg( \''+a+"', '"+e+"', '"+o+"', '"+l+"', '"+n+"' );\">",i+='              <i class="fa fa-minus-square-o fa-2x" aria-hidden="true"></i>',i+="            </a>",i+="        </td>",i+="      </tr>"}}}),i+="    </tbody>",i+="    <tfoot>",i+="    </tfoot>",i+="  </table>",i+="</div>"):i='<span style="font-size:14px;" class="font-italic text-muted">Nenhum provento divulgado...</span><br/>',$("#DivConteudoCalendarioProv").html(i)},error:function(a){fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}),t(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})}catch(a){fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}async function fRemoverProventDivulg(a,t,r,e,o){try{promise=new Promise((i,l)=>{var n=$("#TrProvDivulg-"+e+"-"+r+"-"+t).closest("tr");n.fadeOut(300,function(){n.remove(),$("#GridCalProv tr").length<=1&&$("#DivConteudoCalendarioProv").html('<span style="font-size:14px;" class="font-italic text-muted">Nenhum provento divulgado...</span><br/>')}),$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:a+"principal/removerProvDivulgado",data:{IdEmprProv:t,CodAtivo:r,Tipo:e,DataEx:o},success:function(t){var r=t.data.Resultado,e=t.data.Mensagem;return"NSESSAO"==r?($(location).attr("href",a+"/login"),!1):"NOK"==r?(fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_AVISO,e),!1):"FALHA"==r?(fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,e),!1):"OK"==r||(fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,e),!1)},error:function(a){return fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO),!1}}),i(!0)}).then(a=>{}).catch(a=>{fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)})}catch(a){fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}