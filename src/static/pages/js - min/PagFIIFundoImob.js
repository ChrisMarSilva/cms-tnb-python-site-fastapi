function fLimparGrid(a){try{$("th").addClass("text-center"),$("#Grid").dataTable().fnClearTable(),$("#Grid").dataTable({bDestroy:!0}).fnDestroy(),$("#Grid").DataTable({oLanguage:fTraduzirGrid(),aoColumns:[{bSortable:!0,sWidth:"10px",targets:0},{bSortable:!0,sWidth:"20px",targets:1},{bSortable:!0,sWidth:"40px",targets:2},{bSortable:!0,sWidth:"40px",targets:3},{bSortable:!0,sWidth:"40px",targets:4},{visible:!1,targets:5},{bSortable:!0,sWidth:"20px",targets:6}],bFilter:!0,searchable:!0,orderable:!0,bAutoWidth:!1})}catch(a){fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fMontarGrid(a,t){try{$("#Grid").DataTable({processing:!0,serverSide:!1,oLanguage:fTraduzirGrid(),data:t,aoColumns:[{bSortable:!0,sWidth:"10px",targets:0},{bSortable:!0,sWidth:"20px",targets:1},{bSortable:!0,sWidth:"40px",targets:2},{bSortable:!0,sWidth:"40px",targets:3},{bSortable:!0,sWidth:"40px",targets:4},{visible:!1,targets:5},{bSortable:!0,sWidth:"20px",targets:6,render:function(t,r,d){var o="";return"display"==r&&(fiiFundoId=d[5],o+='<a class="btn btn-sm btn-warning btn-icon btn-icon-mini btn-round btn-simple" style="font-size:0.5rem;" title="Alterar '+fiiFundoId+'" href="javascript:void(0);" onclick="fAbrirModalDetalheFundoImob( \''+a+"', '"+fiiFundoId+"', 'Alterar' );\">",o+='   <i class="fa fa-pencil fa-lg" aria-hidden="true"></i> ',o+="</a>"),o}}],createdRow:function(a,t,r){$("td",a).addClass("text-center")},initComplete:function(a,t){},bFilter:!0,bInfo:!0,bLengthChange:!1,searchable:!0,orderable:!0,bOrdering:!0,bSortable:!0,sAutoWidth:!1,bPaginate:!1,bAutoWidth:!1}),$(document).ajaxError(function(t,r,d,o){fLimparGrid(a)})}catch(t){fLimparGrid(a),null!=t.description&&fCriarAlertaPrinc(TP_ALERTA_ERRO,"fMontarGrid"+MSG_ALERTA_ERRO)}}function fCarregarGrid(a){try{fLimparAreaAlertaPrinc(),$("#Grid").dataTable().fnClearTable(),$("#Grid").dataTable({bDestroy:!0}).fnDestroy(),$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:a+"FiiFundoImob/grid",data:{},success:function(t){var r=t.data.Resultado,d=t.data.Mensagem,o=t.data.Lista;return"NSESSAO"==r?($(location).attr("href",a+"/login"),!1):"NOK"==r?(fLimparGrid(a),void fCriarAlertaPrinc(TP_ALERTA_AVISO,d)):"FALHA"==r?(fLimparGrid(a),void fCriarAlertaPrinc(TP_ALERTA_ERRO,d)):"OK"!=r?(fLimparGrid(a),void fCriarAlertaPrinc(TP_ALERTA_ERRO,d)):void fMontarGrid(a,o)},error:function(t,r,d){return fLimparGrid(a),fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO),!1}})}catch(t){fLimparGrid(a),null!=t.description&&fCriarAlertaPrinc(TP_ALERTA_ERRO,"fCarregarGrid"+MSG_ALERTA_ERRO)}}function fLimparDadosModalFundoImob(){fLimparAreaAlertaModalCad(),$("#txtCadFundoId").val(""),$("#txtCadFundoAdmin").val(""),$("#txtCadFundoTipo").val(""),$("#txtCadFundoNome").val(""),$("#txtCadFundoRazao").val(""),$("#txtCadFundoCNPJ").val(""),$("#txtCadFundoCodigo").val(""),$("#txtCadFundoIsin").val(""),$("#txtCadFundoSituacao").val("A"),fDefinirPadraoSelect("txtCadFundoAdmin"),fDefinirPadraoSelect("txtCadFundoTipo")}function fAbrirModalDetalheFundoImob(a,t,r){try{fLimparDadosModalFundoImob(),$("#PopModalDetalheFundoTit").html(""),$("#PopModalDetalheFundoTit").html(" - "+r),"Novo"==r&&$("#PopModalDetalheFundo").modal({backdrop:"static"}),"Alterar"!=r&&"Visualizar"!=r||fCarregarDadosModalDetalheFundoImob(a,t,r),$("#txtCadFundoNome").focus()}catch(a){fCriarAlertaPrinc(TP_ALERTA_ERRO,"fAbrirModalDetalheFundoImob"+MSG_ALERTA_ERRO)}}function fCarregarDadosModalDetalheFundoImob(a,t,r){try{if(fLimparAreaAlertaModalCad(),""==t)return void fCriarAlertaPrinc(TP_ALERTA_AVISO,"Id. Fundo Imob. não informado!");$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:a+"FiiFundoImob/carregar",data:{fiiFundoId:t},success:function(t){var r=t.data.Resultado,d=t.data.Mensagem,o=t.data.Dados;if("NSESSAO"==r)return $(location).attr("href",a+"/login"),!1;"NOK"==r?fCriarAlertaPrinc(TP_ALERTA_AVISO,d):"FALHA"==r?fCriarAlertaPrinc(TP_ALERTA_ERRO,d):"OK"==r&&o.Id?($("#txtCadFundoId").val(o.Id),$("#txtCadFundoAdmin").val(o.AdminId),$("#txtCadFundoTipo").val(o.TipoId),$("#txtCadFundoNome").val(o.Nome),$("#txtCadFundoRazao").val(o.RazaoSocial),$("#txtCadFundoCNPJ").val(o.CNPJ),$("#txtCadFundoCodigo").val(o.Codigo),$("#txtCadFundoIsin").val(o.Isin),$("#txtCadFundoSituacao").val(o.Situacao),fDefinirPadraoSelect("txtCadFundoAdmin"),fDefinirPadraoSelect("txtCadFundoTipo"),$("#PopModalDetalheFundo").modal({backdrop:"static"})):fCriarAlertaPrinc(TP_ALERTA_ERRO,d)},error:function(a,t,r){fCriarAlertaPrinc(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}})}catch(a){fCriarAlertaPrinc(TP_ALERTA_ERRO,"fCarregarDadosModalDetalheFundoImob"+MSG_ALERTA_ERRO)}}function fValidarDadosFundoImob(){try{$("#txtCadFundoId").val().trim(),$("#txtCadFundoAdmin").val(),$("#txtCadFundoTipo").val();var a=$("#txtCadFundoNome").val().trim(),t=$("#txtCadFundoRazao").val().trim(),r=$("#txtCadFundoCNPJ").val().trim(),d=$("#txtCadFundoCodigo").val().trim(),o=($("#txtCadFundoIsin").val().trim(),$("#txtCadFundoSituacao").val()),i="";return""==a&&(i+=" - Nome<br/>"),""==t&&(i+=" - Razao<br/>"),""==r&&(i+=" - CNPJ<br/>"),""==d&&(i+=" - Codigo<br/>"),""==o&&(i+=" - Situacao<br/>"),""==i||(fCriarAlertaModalCad(TP_ALERTA_AVISO,"Os seguintes campos não estão preenchido: <br/>"+i),!1)}catch(a){return fCriarAlertaModalCad(TP_ALERTA_ERRO,"fValidarDadosFundoImob"+MSG_ALERTA_ERRO),!1}}function fSalvarDadosFundoImob(a){try{if(fLimparAreaAlertaModalCad(),!fValidarDadosFundoImob())return!1;iniciarAnimacaoSalvar();var t=$("#txtCadFundoId").val().trim(),r=$("#txtCadFundoAdmin").val(),d=$("#txtCadFundoTipo").val(),o=$("#txtCadFundoNome").val().trim(),i=$("#txtCadFundoRazao").val().trim(),n=$("#txtCadFundoCNPJ").val().trim(),e=$("#txtCadFundoCodigo").val().trim(),l=$("#txtCadFundoIsin").val().trim(),u=$("#txtCadFundoSituacao").val();$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:a+"FiiFundoImob/salvar",data:{fiiFundoId:t,fiiFundoIdAdmin:r,fiiFundoIdTipo:d,fiiFundoNome:o,fiiFundoRazao:i,fiiFundoCNPJ:n,fiiFundoCodigo:e,fiiFundoIsin:l,fiiFundoSituacao:u},success:function(t){finalizarAnimacaoSalvar();var r=t.data.Resultado,d=t.data.Mensagem;if("NSESSAO"==r)return $(location).attr("href",a+"/login"),!1;"NOK"!=r?"FALHA"!=r&&"OK"==r?($("#PopModalDetalheFundo").modal("hide"),fCarregarGrid(a),fCriarAlertaPrinc(TP_ALERTA_SUCESSO,"Dados salvo com sucesso!")):fCriarAlertaModalCad(TP_ALERTA_ERRO,d):fCriarAlertaModalCad(TP_ALERTA_AVISO,d)},error:function(a,t,r){finalizarAnimacaoSalvar(),fCriarAlertaModalCad(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}})}catch(a){return finalizarAnimacaoSalvar(),void CriarAlertaModal(TP_ALERTA_ERRO,"fSalvarDadosFundoImob"+MSG_ALERTA_ERRO)}}$(document).ready(function(){$("#MnPrincFiiFundoImob").addClass("active open"),fLimparAreaAlertaPrinc(),fLimparAreaAlertaModalCad()});