function fAbrirModalDetalheAtivo(a){try{$("#AreaAlertaModalCadAtivo").html(""),$("#txtCadAtivoCodigo").val(""),fDefinirPadraoSelect("txtCadAtivoCodigo"),$("#PopModalDetalheAtivo").modal({backdrop:"static"}),$("#PopModalDetalheAtivo").on("shown.bs.modal",function(){$("#txtCadAtivoCodigo").focus()})}catch(a){fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fCriarAlertaModalCadAtivo(a,r){var o=$("<div/>");o.addClass("alert "+a+" alert-dismissible fade show"),o.attr("id","DivAlerta"+fGerarNumeroAleatorio()),o.append('<button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>'),a==TP_ALERTA_AVISO&&o.append("<small> <strong>Aviso:</strong> "+r+"</small> "),a==TP_ALERTA_SUCESSO&&o.append("<small> <strong>OK:</strong> "+r+"</small> "),a==TP_ALERTA_ERRO&&o.append("<small> <strong>Erro:</strong> "+r+"</small> "),a==TP_ALERTA_ALERTA&&o.append("<small> <strong>Alerta:</strong> "+r+"</small> "),o.delay(5e3).fadeOut("slow",function(){$(this).remove()}),$("#AreaAlertaModalCadAtivo").append(o)}function fValidarDadosAtivo(){try{return $("#AreaAlertaModalCadAtivo").html(""),""!=$("#txtCadAtivoCodigo").val()||(fCriarAlertaModalCadAtivo(TP_ALERTA_AVISO,"Por favor, preencha o campo Cód Ativo!"),!1)}catch(a){return fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO),!1}}function fSalvarDadosAtivo(a){try{var r=fGetAbaIdPortfolio();if(""==r)return void fCriarAlertaModalCadAtivo(TP_ALERTA_AVISO,"Id. Portfólio não informado!");if(!fValidarDadosAtivo())return!1;iniciarAnimacaoSalvar();var o=$("#txtCadAtivoCodigo").val();$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:a+"portfolio/salvarAtivo",data:{IdPortfolio:r,CodAtivo:o},success:function(o){finalizarAnimacaoSalvar();var t=o.data.Resultado,A=o.data.Mensagem;if("NSESSAO"==t)return $(location).attr("href",a+"/login"),!1;"NOK"!=t?"FALHA"!=t&&"OK"==t?($("#PopModalDetalheAtivo").modal("hide"),fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_SUCESSO,"Dados salvo com sucesso!"),fRecarregarPagina(a,r)):fCriarAlertaModalCadAtivo(TP_ALERTA_ERRO,A):fCriarAlertaModalCadAtivo(TP_ALERTA_AVISO,A)},error:function(a){finalizarAnimacaoSalvar(),fCriarAlertaModalCadAtivo(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}})}catch(a){return finalizarAnimacaoSalvar(),void fCriarAlertaModalCadAtivo(TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fAbrirModalRemoverAtivo(a,r,o,t){try{if(fLimparAreaAlerta("AreaAlertaPrinc"),""==r)return void fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_AVISO,"Id. Portfólio não informado!");if(""==o)return void fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_AVISO,"Id. Ativo não informado!");if(""==t)return void fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_AVISO,"Cod. Ativo não informado!");$.ajax({dataType:"json",type:"post",url:a+"portfolio/excluirAtivo",data:{IdPortfolio:r,IdAtivo:o,CodAtivo:t},success:function(o){var t=o.data.Resultado,A=o.data.Mensagem;return"NSESSAO"==t?($(location).attr("href",a+"/login"),!1):"NOK"==t?(fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_AVISO,A),!1):"FALHA"==t?void fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,A):"OK"==t?(fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_SUCESSO,A),fRecarregarPagina(a,r),!0):(fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,A),!1)},error:function(a,r,o){fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}})}catch(a){$("#PopModalDelPortfolio").modal("hide"),fCriarAlerta("AreaAlertaPrinc",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}