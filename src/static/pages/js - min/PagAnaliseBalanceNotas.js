async function fLimparGridBalanceNotas(t){promise=new Promise((t,a)=>{fLimparAreaAlerta("AreaAlertaPrincAnaliseBalance"),$("#DivBalanceNotasGrid").html(""),fAtualizarDadosTituloBalanceNotas(0,0,0,0,0,0),t(!0)}).then(t=>{}).catch(t=>{})}async function fCarregarListaPortfolioBalanc(t){try{promise=new Promise((a,r)=>{$("#txtFiltroBalanceNotaPortfolio").empty(),$("#txtFiltroBalanceNotaPortfolio").append('<option value=""  selected>Meu Portfólio</option>'),$("#txtFiltroBalanceNotaPortfolio").append('<option value="ACAO">Minhas Ações </option>'),$("#txtFiltroBalanceNotaPortfolio").append('<option value="FII">Meus FIIs    </option>'),$("#txtFiltroBalanceNotaPortfolio").append('<option value="ETF">Meus ETFs    </option>'),$("#txtFiltroBalanceNotaPortfolio").append('<option value="BDR">Minhas BDRs </option>'),$("#txtFiltroBalanceNotaPercent").empty(),$("#txtFiltroBalanceNotaPercent").append('<option value=""  selected>Meu Portfólio</option>'),$("#txtFiltroBalanceNotaPercent").append('<option value="ACAO">Minhas Ações </option>'),$("#txtFiltroBalanceNotaPercent").append('<option value="FII">Meus FIIs    </option>'),$("#txtFiltroBalanceNotaPercent").append('<option value="ETF">Meus ETFs    </option>'),$("#txtFiltroBalanceNotaPercent").append('<option value="BDR">Minhas BDRs </option>'),$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:t+"listas/lista_nomes_carteira_user",success:function(a){var r=a.data.Resultado,o=a.data.Mensagem,e=a.data.Lista;return"NSESSAO"==r?($(location).attr("href",t+"/login"),!1):"NOK"==r?(fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_AVISO,o),!1):"FALHA"==r?(fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_ERRO,o),!1):"OK"==r?($.each(e,function(t,a){$("#txtFiltroBalanceNotaPortfolio").append('<option value="'+a[0]+'">'+a[1]+"</option>"),$("#txtFiltroBalanceNotaPercent").append('<option value="'+a[0]+'">'+a[1]+"</option>")}),fDefinirPadraoSelect("txtFiltroBalanceNotaPortfolio"),fDefinirPadraoSelect("txtFiltroBalanceNotaPercent"),!0):(fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_ERRO,o),!1)},error:function(t){return fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_ERRO,MSG_ALERTA_ERRO),!1}}),a(!0)}).then(t=>{}).catch(t=>{})}catch(t){fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}async function fAtualizarDadosTituloBalanceNotas(t,a,r,o,e,l,s,d){promise=new Promise((i,c)=>{$("#TxtBalanceNotas_TotAtual").html("R$ "+fMascaraValor(t)),$("#TxtBalanceNotas_TotAjuste").html("R$ "+fMascaraValor(a));var n=0;t>0&&r>0&&(n=r/t*100),$("#TxtBalanceNotas_TotAtualAcao").html("R$ "+fMascaraValor(r)+" ("+fMascaraValor(n)+"%)");var p=0;a>0&&o>0&&(p=o/a*100),$("#TxtBalanceNotas_TotAjusteAcao").html("R$ "+fMascaraValor(o)+" ("+fMascaraValor(p)+"%)");var b=0;t>0&&e>0&&(b=e/t*100),$("#TxtBalanceNotas_TotAtualFII").html("R$ "+fMascaraValor(e)+" ("+fMascaraValor(b)+"%)");var x=0;a>0&&l>0&&(x=l/a*100),$("#TxtBalanceNotas_TotAjusteFII").html("R$ "+fMascaraValor(l)+" ("+fMascaraValor(x)+"%)");var f=0;t>0&&s>0&&(f=s/t*100),$("#TxtBalanceNotas_TotAtualETF").html("R$ "+fMascaraValor(s)+" ("+fMascaraValor(f)+"%)");var A=0;a>0&&d>0&&(A=d/a*100),$("#TxtBalanceNotas_TotAjusteETF").html("R$ "+fMascaraValor(d)+" ("+fMascaraValor(A)+"%)"),i(!0)}).then(t=>{}).catch(t=>{})}function fDimunuirNota(t,a){var r="";""==(r=$("#txtPortfBalancNotasPercent"+a).val())&&(r=0),(r=parseInt(r)-1)<=0&&(r=0),$("#txtPortfBalancNotasPercent"+a).val(r),fCalcularBalanceNotas(t)}function fAumentarNota(t,a){var r="";""==(r=$("#txtPortfBalancNotasPercent"+a).val())&&(r=0),(r=parseInt(r)+1)>=100&&(r=100),$("#txtPortfBalancNotasPercent"+a).val(r),fCalcularBalanceNotas(t)}function iniciarAnimacaoPesquisarBalanceNotas(){$("#txtFiltroBalanceNotaPortfolio").attr("disabled","disabled"),fDefinirPadraoSelect("txtFiltroBalanceNotaPortfolio")}function finalizarAnimacaoPesquisaBalanceNotas(){$("#txtFiltroBalanceNotaPortfolio").removeAttr("disabled"),fDefinirPadraoSelect("txtFiltroBalanceNotaPortfolio")}async function fCarregarGridBalanceNotas(t){try{promise=new Promise((a,r)=>{finalizarAnimacaoPesquisaBalanceNotas(),iniciarAnimacaoPesquisarBalanceNotas();var o=$("#DivBalanceNotasGrid");o.html("");var e=$("#txtFiltroBalanceNotaPortfolio").val();$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:t+"Analise/gridBalanceNotas",data:{IdPortfolio:e},success:function(a){var r=a.data.Resultado,e=a.data.Mensagem,l=a.data.Lista;if("NSESSAO"==r)return $(location).attr("href",t+"/login"),!1;if("NOK"==r)return finalizarAnimacaoPesquisaBalanceNotas(),void fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_AVISO,e);if("FALHA"==r)return finalizarAnimacaoPesquisaBalanceNotas(),void fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_ERRO,e);if("OK"==r){if(l.length>0){var s="",d=0;$.each(l,function(t,a){d+=parseFloat(GetValorDecimal(a[3]))}),l.sort(function(t,a){var r=parseFloat(GetValorDecimal(t[4])),o=parseFloat(GetValorDecimal(a[4]));return r==o?0:r>o?1:-1}),s+='<div class="table-responsive" id="AreaGrid">',s+='<table class="table table-sm table-hover" style="font-size: 12px" border="0" cellspacing="0" width="100%" style="margin: 0px;">',s+="  <thead>",s+='    <tr class="text-center bg-dark text-white" style="font-size: 12px"> ',s+='      <th style="border: 0px; border: 1px solid black;" colspan="3">ATIVO</th>',s+='      <th style="border: 0px" bgcolor="#FFFFFF" style="width:10px"> </th>',s+='      <th style="border: 0px; border: 1px solid black;" colspan="3">PORTFÓLIO ATUAL</th>',s+='      <th style="border: 0px" bgcolor="#FFFFFF" style="width:10px"> </th>',s+='      <th style="border: 0px; border: 1px solid black;" colspan="4">PORTFÓLIO AJUSTADO</th>',s+='      <th style="border: 0px" bgcolor="#FFFFFF" style="width:10px"> </th>',s+='      <th style="border: 0px; border: 1px solid black;" colspan="3">RESULTADO</th>',s+="    </tr>",s+='    <tr class="text-center bg-dark text-white"> ',s+='      <th style="border: 0px; width:5px; border-left: 1px solid black; ">Tipo</th>',s+='      <th style="border: 0px; width:5px; ">Código</th>',s+='      <th style="border: 0px; width:5px; border-right: 1px solid black; ">Preço</th>',s+='      <th style="border: 0px; width:5px; border: 0px" bgcolor="#FFFFFF" > </th>',s+='      <th style="border: 0px; width:5px; border-left: 1px solid black; "> Quant. </th>',s+='      <th style="border: 0px; width:20px;"> Total</th>',s+='      <th style="border: 0px; width:5px; border-right: 1px solid black; "> % Atual</th>',s+='      <th style="border: 0px; width:5px; border: 0px" bgcolor="#FFFFFF" > </th>',s+='      <th style="border: 0px; width:5px; border-left: 1px solid black; "> Nota</th>',s+='      <th style="border: 0px; width:10px;"> Quant. </th>',s+='      <th style="border: 0px; width:10px;"> Total </th>',s+='      <th style="border: 0px; width:30px; border-right: 1px solid black; "> % Definido</th>',s+='      <th style="border: 0px; width:5px; border: 0px" bgcolor="#FFFFFF" > </th>',s+='      <th style="border: 0px; width:30px; border-left: 1px solid black; "> Status </th>',s+='      <th style="border: 0px; width:5px;"> Quant. </th>',s+='      <th style="border: 0px; width:20px; border-right: 1px solid black; "> Total </th>',s+="    </tr>",s+="  </thead>",s+="  <tbody>";var i=0;return $.each(l,function(a,r){var o=r[0],e=r[1],l=parseFloat(GetValorDecimal(r[2])),c=parseFloat(GetValorDecimal(r[3])),n=parseFloat(GetValorDecimal(r[4])),p=r[5],b=r[6],x=0;""==n&&(n="0"),c>0&&d>0&&(x=c/d*100),x>0&&(x=Math.floor(100*x)/100),i!=n&&(i=n,s+='    <tr class="bg-dark"> ',s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-left: 1px solid black;" class="font-weight-bold"> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; " class="border: 0px; font-weight-bold"> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-right: 1px solid black;"> </td>',s+='      <td style="border: 0px; " bgcolor="#FFFFFF"> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-left: 1px solid black;"> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; "> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-right: 1px solid black;"> </td>',s+='      <td style="border: 0px;" bgcolor="#FFFFFF"> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-left: 1px solid black;" align="center"> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; "> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; "> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-right: 1px solid black;"> </td>',s+='      <td style="border: 0px" bgcolor="#FFFFFF"> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-left: 1px solid black;"> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; "> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-right: 1px solid black;"> </td>',s+="    </tr>"),s+='    <tr class="text-center" id="LinhaPortfBalanc'+o+'"> ',s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-left: 1px solid black;" class="font-weight-bold">'+("ACAO"==b?"AÇÃO":b)+"</td>",s+='      <td style="border: 0px; border-bottom: 1px solid gray; " class="border: 0px; font-weight-bold">'+o+"</td>",s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-right: 1px solid black;">R$ '+fMascaraValor(l)+"</td>",s+='      <td style="border: 0px; " bgcolor="#FFFFFF"> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-left: 1px solid black;">'+e+"</td>",s+='      <td style="border: 0px; border-bottom: 1px solid gray; ">R$ '+fMascaraValor(c)+"</td>",s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-right: 1px solid black;">'+fMascaraValor(x)+"%</td>",s+='      <td style="border: 0px;" bgcolor="#FFFFFF"> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-left: 1px solid black;" align="center">',s+='            <input type="number" min="0" max="100" step="1" maxlength="6" required  id="txtPortfBalancNotasPercent'+o+'"  name="txtPortfBalancNotasPercent'+o+'"  onchange="fCalcularBalanceNotas(\''+t+'\')"  style="font-size:12px; width:80px; height:25px;"  class="DivPortfBalancNotas form-control text-center"  data-id="'+p+'"  data-codigo="'+o+'"  data-tipoInvest="'+b+'"  data-preco="'+l+'"  data-quant="'+e.replace(".","")+'"  data-percent="'+x+'"  data-nota="'+n+'"  data-total="'+c+'"  data-totalinvest="'+d+'"  value="'+n+'" > ',s+="      </td>",s+='      <td style="border: 0px; border-bottom: 1px solid gray; "> <span id="txtPortfBalancNotasQtde'+o+'">0</span> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; ">R$ <span id="txtPortfBalancNotasTot'+o+'">0,00</span></td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-right: 1px solid black;"><span id="txtPortfBalancNotasPrct'+o+'">0,00</span>%</td>',s+='      <td style="border: 0px" bgcolor="#FFFFFF"> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-left: 1px solid black;"> <span id="txtPortfBalancNotasStatus'+o+'"> </span></td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; "> <span id="txtPortfBalancNotasQtdeDif'+o+'">0</span> </td>',s+='      <td style="border: 0px; border-bottom: 1px solid gray; border-right: 1px solid black;">R$ <span id="txtPortfBalancNotasDif'+o+'">0,00</span></td>',s+="    </tr>"}),s+='    <tr class="text-center bg-dark text-white"> ',s+='      <td style="border: 0px; border-left: 1px solid black; "></td>',s+='      <td style="border: 0px;"> </td>',s+='      <td style="border: 0px; border-right: 1px solid black; "> </td>',s+='      <td style="border: 0px;" bgcolor="#FFFFFF" > </td>',s+='      <td style="border: 0px; border-left: 1px solid black; "> </td>',s+='      <td style="border: 0px;"  class="font-weight-bold"> R$ '+fMascaraValor(d)+"</td>",s+='      <td style="border: 0px; border-right: 1px solid black; "> </td>',s+='      <td style="border: 0px;" bgcolor="#FFFFFF" > </td>',s+='      <td style="border: 0px; border-left: 1px solid black; "  class="font-weight-bold"> <span id="txtPortfBalancNotasNota">0</span> </td>',s+='      <td style="border: 0px;"> </td>',s+='      <td style="border: 0px;"  class="font-weight-bold"> R$ <span id="txtPortfBalancNotasTot">0,00</span> </td>',s+='      <td style="border: 0px; border-right: 1px solid black; "  class="font-weight-bold"> <span id="txtPortfBalancNotasPerct" style="font-size: 10px;" >0,00</span>% </td>',s+='      <td style="border: 0px;" bgcolor="#FFFFFF" > </td>',s+='      <td style="border: 0px; width:30px; border-left: 1px solid black; ">  </td>',s+='      <td style="border: 0px;"> </td>',s+='      <td style="border: 0px; border-right: 1px solid black; "> </td>',s+="    </tr>",s+='    <tr class="text-center bg-dark text-white"> ',s+='      <td style="border: 0px; border-top: 1px solid black; border-left: 1px solid black; " class="font-weight-bold">Tipo</td>',s+='      <td style="border: 0px; border-top: 1px solid black;" class="font-weight-bold">Código</td>',s+='      <td style="border: 0px; border-top: 1px solid black; border-right: 1px solid black; " class="font-weight-bold">Preço</td>',s+='      <td style="border: 0px; " bgcolor="#FFFFFF" > </td>',s+='      <td style="border: 0px; border-top: 1px solid black; border-left: 1px solid black; " class="font-weight-bold"> Quant. </td>',s+='      <td style="border: 0px; border-top: 1px solid black;" class="font-weight-bold"> Total</td>',s+='      <td style="border: 0px; border-top: 1px solid black;border-right: 1px solid black; " class="font-weight-bold"> % Atual</td>',s+='      <td style="border: 0px; "  bgcolor="#FFFFFF" > </td>',s+='      <td style="border: 0px; border-top: 1px solid black;border-left: 1px solid black; " class="font-weight-bold"> Nota</td>',s+='      <td style="border: 0px; border-top: 1px solid black;" class="font-weight-bold"> Quant. </td>',s+='      <td style="border: 0px; border-top: 1px solid black;" class="font-weight-bold"> Total </td>',s+='      <td style="border: 0px; border-top: 1px solid black;border-right: 1px solid black; " class="font-weight-bold"> % Definido</td>',s+='      <td style="border: 0px; "  bgcolor="#FFFFFF" > </td>',s+='      <td style="border: 0px; border-top: 1px solid black; width:30px; border-left: 1px solid black; " class="font-weight-bold"> Status </td>',s+='      <td style="border: 0px; border-top: 1px solid black;" class="font-weight-bold"> Quant. </td>',s+='      <td style="border: 0px; border-top: 1px solid black; border-right: 1px solid black; " class="font-weight-bold"> Total </td>',s+="    </tr>",s+='    <tr class="text-center bg-dark text-white"> ',s+='      <td style="border: 0px; border: 1px solid black;" colspan="3" class="font-weight-bold">ATIVO</td>',s+='      <td style="border: 0px; " bgcolor="#FFFFFF" > </td>',s+='      <td style="border: 0px; border: 1px solid black;" colspan="3" class="font-weight-bold">PORTFÓLIO ATUAL</td>',s+='      <td style="border: 0px; " bgcolor="#FFFFFF"> </td>',s+='      <td style="border: 0px; border: 1px solid black;" colspan="4" class="font-weight-bold">PORTFÓLIO AJUSTADO</td>',s+='      <td style="border: 0px; " bgcolor="#FFFFFF" > </td>',s+='      <td style="border: 0px; border: 1px solid black;" colspan="3" class="font-weight-bold">RESULTADO</td>',s+="    </tr>",s+="  </tbody>",s+="</table>",s+="</div>",o.html(""),o.html(s),fCalcularBalanceNotas(t),finalizarAnimacaoPesquisaBalanceNotas(),!0}return finalizarAnimacaoPesquisaBalanceNotas(),!0}return finalizarAnimacaoPesquisaBalanceNotas(),void fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_ERRO,e)},error:function(t,a,r){finalizarAnimacaoPesquisaBalanceNotas(),fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}),a(!0)}).then(t=>{}).catch(t=>{})}catch(t){finalizarAnimacaoPesquisaBalanceNotas(),fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}async function fCalcularBalanceNotas(t){try{promise=new Promise((t,a)=>{fLimparAreaAlerta("AreaAlertaPrincAnaliseBalance");var r=0,o=0,e=0,l=0,s=0,d=0,i=0,c=0,n=0,p=0,b=0;$.each($(".DivPortfBalancNotas"),function(){var t=$(this).data("codigo"),a=parseFloat(GetValorDecimal($("#txtPortfBalancNotasPercent"+t).val()));e+=a}),$.each($(".DivPortfBalancNotas"),function(){var t=$(this).data("codigo"),a=$(this).data("tipoinvest"),x=$(this).data("preco"),f=$(this).data("quant"),A=($(this).data("nota"),$(this).data("total")),h=$(this).data("totalinvest"),F=parseInt($("#txtPortfBalancNotasPercent"+t).val()),P=0,y=0,B=0,u=0,g=0,N="NDA";F>0&&h>0&&(y=h/e*F),y>0&&x>0&&(P=Math.floor(y/x)),P>0&&(y=P*x),y>0&&h>0&&(B=y/h*100),A>y&&(u=A-y,g=f-P,N="VENDER"),A<y&&(u=y-A,g=P-f,N="COMPRAR"),0!=g&&"0"!=g.toLocaleString()&&f!=g||(P=f,y=A,u=0,g=0,N="NDA"),0==F&&(P=0,y=0,u=0,g=0,N="NDA"),$("#txtPortfBalancNotasQtde"+t).html(P.toLocaleString()),$("#txtPortfBalancNotasTot"+t).html(fMascaraValor(y)),$("#txtPortfBalancNotasPrct"+t).html(fMascaraValor(B)),$("#txtPortfBalancNotasDif"+t).html(fMascaraValor(u)),$("#txtPortfBalancNotasQtdeDif"+t).html(g.toLocaleString()),$("#txtPortfBalancNotasStatus"+t).html(N),$("#txtPortfBalancNotasStatus"+t).removeClass("text-muted"),$("#txtPortfBalancNotasStatus"+t).removeClass("text-success"),$("#txtPortfBalancNotasStatus"+t).removeClass("text-danger"),"NDA"==N&&$("#txtPortfBalancNotasStatus"+t).addClass("text-muted"),"COMPRAR"==N&&$("#txtPortfBalancNotasStatus"+t).addClass("text-success"),"VENDER"==N&&$("#txtPortfBalancNotasStatus"+t).addClass("text-danger"),r+=B,o+=y,l+=A,"ACAO"==a&&(d+=A),"FII"==a&&(c+=A),"ETF"==a&&(p+=A),s+=y,"ACAO"==a&&(i+=y),"FII"==a&&(n+=y),"ETF"==a&&(b+=y)}),$("#txtPortfBalancNotasPerct").html(fMascaraValor(r)),$("#txtPortfBalancNotasTot").html(fMascaraValor(o)),$("#txtPortfBalancNotasNota").html(e),fAtualizarDadosTituloBalanceNotas(l,s,d,i,c,n,p,b),t(!0)}).then(t=>{}).catch(t=>{})}catch(t){fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}function fDividirValoresBalanceNotas(t){try{fLimparAreaAlerta("AreaAlertaPrincAnaliseBalance"),$.each($(".DivPortfBalancNotas"),function(){var t=$(this).data("codigo");$("#txtPortfBalancNotasPercent"+t).val("1")}),fCalcularBalanceNotas(t)}catch(t){fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}async function fResetarValoresBalanceNotas(t){try{promise=new Promise((a,r)=>{fLimparAreaAlerta("AreaAlertaPrincAnaliseBalance"),$.each($(".DivPortfBalancNotas"),function(){var t=$(this).data("codigo"),a=$(this).data("nota");$("#txtPortfBalancNotasPercent"+t).val(a)}),fCalcularBalanceNotas(t),a(!0)}).then(t=>{}).catch(t=>{})}catch(t){fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}async function fLimparValoresBalanceNotas(t){try{promise=new Promise((a,r)=>{fLimparAreaAlerta("AreaAlertaPrincAnaliseBalance"),$.each($(".DivPortfBalancNotas"),function(){var t=$(this).data("codigo");$("#txtPortfBalancNotasPercent"+t).val("0")}),fCalcularBalanceNotas(t),a(!0)}).then(t=>{}).catch(t=>{})}catch(t){fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}async function fSalvarValoresBalanceNotas(t){try{promise=new Promise((a,r)=>{fLimparAreaAlerta("AreaAlertaPrincAnaliseBalance");var o=[];if($.each($(".DivPortfBalancNotas"),function(){var t=$(this).data("codigo"),a=$(this).data("tipoinvest"),r=$("#txtPortfBalancNotasPercent"+t).val();o.push({TipoInvest:a,CodAtivo:t,Nota:r})}),o.length<=0)return fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_AVISO,"Sem Dados para Salvar!"),!1;$.ajax({cache:"false",dataType:"json",async:!0,type:"POST",url:t+"Analise/salvarBalanceNotas",data:{lista:o},success:function(a){var r=a.data.Resultado,o=a.data.Mensagem;if("NSESSAO"==r)return $(location).attr("href",t+"/login"),!1;"NOK"!=r?"FALHA"!=r&&"OK"==r?(fCarregarGridBalanceNotas(t),fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_SUCESSO,"Dados salvo com sucesso!")):fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_ERRO,o):fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_AVISO,o)},error:function(t,a,r){fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}),a(!0)}).then(t=>{}).catch(t=>{})}catch(t){fCriarAlerta("AreaAlertaPrincAnaliseBalance",TP_ALERTA_ERRO,MSG_ALERTA_ERRO)}}